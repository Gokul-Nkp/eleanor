[36m[2019-04-28 20:09:11 DEBUG][39m ###############################################################################
[36m[2019-04-28 20:09:11 DEBUG][39m Running command 'run'
[36m[2019-04-28 20:09:11 DEBUG][39m Using settings file '/Users/adhorn/.chaostoolkit/settings.yaml'
[36m[2019-04-28 20:09:12 DEBUG][39m The Chaos Toolkit settings file could not be found at '/Users/adhorn/.chaostoolkit/settings.yaml'.
[36m[2019-04-28 20:09:12 DEBUG][39m Building activity cache...
[36m[2019-04-28 20:09:12 DEBUG][39m Cached 4 activities
[32m[2019-04-28 20:09:12 INFO][39m Validating the experiment's syntax
[36m[2019-04-28 20:09:12 DEBUG][39m Loading configuration...
[36m[2019-04-28 20:09:12 DEBUG][39m Loading secrets...
[36m[2019-04-28 20:09:12 DEBUG][39m Secrets loaded
[32m[2019-04-28 20:09:12 INFO][39m Experiment looks valid
[36m[2019-04-28 20:09:12 DEBUG][39m Clearing activities cache
[36m[2019-04-28 20:09:12 DEBUG][39m Building activity cache...
[36m[2019-04-28 20:09:12 DEBUG][39m Cached 4 activities
[32m[2019-04-28 20:09:12 INFO][39m Running experiment: What is the impact of an terminating the database master
[36m[2019-04-28 20:09:12 DEBUG][39m Loading configuration...
[36m[2019-04-28 20:09:12 DEBUG][39m Loading secrets...
[36m[2019-04-28 20:09:12 DEBUG][39m Secrets loaded
[36m[2019-04-28 20:09:12 DEBUG][39m Initializing controls
[32m[2019-04-28 20:09:12 INFO][39m Steady state hypothesis: Application responds
[32m[2019-04-28 20:09:12 INFO][39m Probe: we-can-request-sunset
[36m[2019-04-28 20:09:12 DEBUG][39m   => succeeded with '{'status': 200, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Sun, 28 Apr 2019 17:09:12 GMT', 'Content-Type': 'application/json', 'Content-Length': '29', 'Connection': 'keep-alive'}, 'body': {'Status': 'Up and running!'}}'
[36m[2019-04-28 20:09:12 DEBUG][39m allowed tolerance is 200
[32m[2019-04-28 20:09:12 INFO][39m Steady state hypothesis is met!
[32m[2019-04-28 20:09:12 INFO][39m Action: stop-master-db
[36m[2019-04-28 20:09:12 DEBUG][39m Running: /usr/local/bin/docker pause $(docker ps -qf 'name=master')
[36m[2019-04-28 20:09:12 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-04-28 20:09:12 DEBUG][39m   => succeeded with '{'status': 1, 'stdout': '', 'stderr': 'Error response from daemon: Container 1767ac307d473ca1b82841894d6c849f932e177c8992ce3c7fb90b87732f2798 is already paused\n'}'
[32m[2019-04-28 20:09:12 INFO][39m Pausing after activity for 10s...
[32m[2019-04-28 20:09:22 INFO][39m Probe: read-status
[36m[2019-04-28 20:09:22 DEBUG][39m Running: /Users/adhorn/.pyenv/shims/http get http://127.0.0.1:80/api/echo
[36m[2019-04-28 20:09:23 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-04-28 20:09:23 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '{"Status": "Up and running!"}', 'stderr': ''}'
[32m[2019-04-28 20:09:23 INFO][39m Action: restart-master-db
[36m[2019-04-28 20:09:23 DEBUG][39m Running: /usr/local/bin/docker start $(docker ps -qf 'name=master')
[36m[2019-04-28 20:09:23 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-04-28 20:09:23 DEBUG][39m   => succeeded with '{'status': 1, 'stdout': '', 'stderr': 'Error response from daemon: cannot start a paused container, try unpause instead\nError: failed to start containers: 1767ac307d47\n'}'
[32m[2019-04-28 20:09:23 INFO][39m Pausing after activity for 10s...
[32m[2019-04-28 20:09:33 INFO][39m Probe: read-status
[36m[2019-04-28 20:09:33 DEBUG][39m Running: /Users/adhorn/.pyenv/shims/http get http://127.0.0.1:80/api/echo
[36m[2019-04-28 20:09:34 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-04-28 20:09:34 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '{"Status": "Up and running!"}', 'stderr': ''}'
[32m[2019-04-28 20:09:34 INFO][39m Steady state hypothesis: Application responds
[32m[2019-04-28 20:09:34 INFO][39m Probe: we-can-request-sunset
[36m[2019-04-28 20:09:34 DEBUG][39m   => succeeded with '{'status': 200, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Sun, 28 Apr 2019 17:09:34 GMT', 'Content-Type': 'application/json', 'Content-Length': '29', 'Connection': 'keep-alive'}, 'body': {'Status': 'Up and running!'}}'
[36m[2019-04-28 20:09:34 DEBUG][39m allowed tolerance is 200
[32m[2019-04-28 20:09:34 INFO][39m Steady state hypothesis is met!
[32m[2019-04-28 20:09:34 INFO][39m Let's rollback...
[32m[2019-04-28 20:09:34 INFO][39m Rollback: restart-master-db
[32m[2019-04-28 20:09:34 INFO][39m Action: restart-master-db
[36m[2019-04-28 20:09:34 DEBUG][39m Running: /usr/local/bin/docker start $(docker ps -qf 'name=master')
[36m[2019-04-28 20:09:34 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-04-28 20:09:34 DEBUG][39m   => succeeded with '{'status': 1, 'stdout': '', 'stderr': 'Error response from daemon: cannot start a paused container, try unpause instead\nError: failed to start containers: 1767ac307d47\n'}'
[32m[2019-04-28 20:09:34 INFO][39m Experiment ended with status: completed
[36m[2019-04-28 20:09:34 DEBUG][39m Cleaning up controls
[36m[2019-04-28 20:09:34 DEBUG][39m Clearing activities cache
[36m[2019-04-28 20:09:55 DEBUG][39m ###############################################################################
[36m[2019-04-28 20:09:55 DEBUG][39m Running command 'run'
[36m[2019-04-28 20:09:55 DEBUG][39m Using settings file '/Users/adhorn/.chaostoolkit/settings.yaml'
[36m[2019-04-28 20:09:56 DEBUG][39m The Chaos Toolkit settings file could not be found at '/Users/adhorn/.chaostoolkit/settings.yaml'.
[36m[2019-04-28 20:09:56 DEBUG][39m Building activity cache...
[36m[2019-04-28 20:09:56 DEBUG][39m Cached 4 activities
[32m[2019-04-28 20:09:56 INFO][39m Validating the experiment's syntax
[36m[2019-04-28 20:09:56 DEBUG][39m Loading configuration...
[36m[2019-04-28 20:09:56 DEBUG][39m Loading secrets...
[36m[2019-04-28 20:09:56 DEBUG][39m Secrets loaded
[32m[2019-04-28 20:09:56 INFO][39m Experiment looks valid
[36m[2019-04-28 20:09:56 DEBUG][39m Clearing activities cache
[36m[2019-04-28 20:09:56 DEBUG][39m Building activity cache...
[36m[2019-04-28 20:09:56 DEBUG][39m Cached 4 activities
[32m[2019-04-28 20:09:56 INFO][39m Running experiment: What is the impact of an terminating the database master
[36m[2019-04-28 20:09:56 DEBUG][39m Loading configuration...
[36m[2019-04-28 20:09:56 DEBUG][39m Loading secrets...
[36m[2019-04-28 20:09:56 DEBUG][39m Secrets loaded
[36m[2019-04-28 20:09:56 DEBUG][39m Initializing controls
[32m[2019-04-28 20:09:56 INFO][39m Steady state hypothesis: Application responds
[32m[2019-04-28 20:09:56 INFO][39m Probe: we-can-request-sunset
[36m[2019-04-28 20:09:56 DEBUG][39m   => succeeded with '{'status': 200, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Sun, 28 Apr 2019 17:09:56 GMT', 'Content-Type': 'application/json', 'Content-Length': '29', 'Connection': 'keep-alive'}, 'body': {'Status': 'Up and running!'}}'
[36m[2019-04-28 20:09:56 DEBUG][39m allowed tolerance is 200
[32m[2019-04-28 20:09:56 INFO][39m Steady state hypothesis is met!
[32m[2019-04-28 20:09:56 INFO][39m Action: stop-master-db
[36m[2019-04-28 20:09:56 DEBUG][39m Running: /usr/local/bin/docker pause $(docker ps -qf 'name=master')
[36m[2019-04-28 20:09:56 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-04-28 20:09:56 DEBUG][39m   => succeeded with '{'status': 1, 'stdout': '', 'stderr': 'Error response from daemon: Container 1767ac307d473ca1b82841894d6c849f932e177c8992ce3c7fb90b87732f2798 is already paused\n'}'
[32m[2019-04-28 20:09:56 INFO][39m Pausing after activity for 10s...
[32m[2019-04-28 20:10:06 INFO][39m Probe: read-status
[36m[2019-04-28 20:10:06 DEBUG][39m Running: /Users/adhorn/.pyenv/shims/http get http://127.0.0.1:80/api/echo
[36m[2019-04-28 20:10:06 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-04-28 20:10:06 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '{"Status": "Up and running!"}', 'stderr': ''}'
[32m[2019-04-28 20:10:06 INFO][39m Action: restart-master-db
[36m[2019-04-28 20:10:06 DEBUG][39m Running: /usr/local/bin/docker start $(docker ps -qf 'name=master')
[36m[2019-04-28 20:10:06 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-04-28 20:10:06 DEBUG][39m   => succeeded with '{'status': 1, 'stdout': '', 'stderr': 'Error response from daemon: cannot start a paused container, try unpause instead\nError: failed to start containers: 1767ac307d47\n'}'
[32m[2019-04-28 20:10:06 INFO][39m Pausing after activity for 10s...
[32m[2019-04-28 20:10:16 INFO][39m Probe: read-status
[36m[2019-04-28 20:10:16 DEBUG][39m Running: /Users/adhorn/.pyenv/shims/http get http://127.0.0.1:80/api/echo
[36m[2019-04-28 20:10:17 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-04-28 20:10:17 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '{"Status": "Up and running!"}', 'stderr': ''}'
[32m[2019-04-28 20:10:17 INFO][39m Steady state hypothesis: Application responds
[32m[2019-04-28 20:10:17 INFO][39m Probe: we-can-request-sunset
[36m[2019-04-28 20:10:17 DEBUG][39m   => succeeded with '{'status': 200, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Sun, 28 Apr 2019 17:10:17 GMT', 'Content-Type': 'application/json', 'Content-Length': '29', 'Connection': 'keep-alive'}, 'body': {'Status': 'Up and running!'}}'
[36m[2019-04-28 20:10:17 DEBUG][39m allowed tolerance is 200
[32m[2019-04-28 20:10:17 INFO][39m Steady state hypothesis is met!
[32m[2019-04-28 20:10:17 INFO][39m Let's rollback...
[32m[2019-04-28 20:10:17 INFO][39m Rollback: restart-master-db
[32m[2019-04-28 20:10:17 INFO][39m Action: restart-master-db
[36m[2019-04-28 20:10:17 DEBUG][39m Running: /usr/local/bin/docker start $(docker ps -qf 'name=master')
[36m[2019-04-28 20:10:17 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-04-28 20:10:17 DEBUG][39m   => succeeded with '{'status': 1, 'stdout': '', 'stderr': 'Error response from daemon: cannot start a paused container, try unpause instead\nError: failed to start containers: 1767ac307d47\n'}'
[32m[2019-04-28 20:10:17 INFO][39m Experiment ended with status: completed
[36m[2019-04-28 20:10:17 DEBUG][39m Cleaning up controls
[36m[2019-04-28 20:10:17 DEBUG][39m Clearing activities cache
[36m[2019-04-28 20:23:21 DEBUG][39m ###############################################################################
[36m[2019-04-28 20:23:21 DEBUG][39m Running command 'run'
[36m[2019-04-28 20:23:21 DEBUG][39m Using settings file '/Users/adhorn/.chaostoolkit/settings.yaml'
[36m[2019-04-28 20:23:21 DEBUG][39m The Chaos Toolkit settings file could not be found at '/Users/adhorn/.chaostoolkit/settings.yaml'.
[36m[2019-04-28 20:23:21 DEBUG][39m Building activity cache...
[36m[2019-04-28 20:23:21 DEBUG][39m Cached 4 activities
[32m[2019-04-28 20:23:21 INFO][39m Validating the experiment's syntax
[36m[2019-04-28 20:23:21 DEBUG][39m Loading configuration...
[36m[2019-04-28 20:23:21 DEBUG][39m Loading secrets...
[36m[2019-04-28 20:23:21 DEBUG][39m Secrets loaded
[32m[2019-04-28 20:23:21 INFO][39m Experiment looks valid
[36m[2019-04-28 20:23:21 DEBUG][39m Clearing activities cache
[36m[2019-04-28 20:23:21 DEBUG][39m Building activity cache...
[36m[2019-04-28 20:23:21 DEBUG][39m Cached 4 activities
[32m[2019-04-28 20:23:21 INFO][39m Running experiment: What is the impact of an terminating the database master
[36m[2019-04-28 20:23:21 DEBUG][39m Loading configuration...
[36m[2019-04-28 20:23:21 DEBUG][39m Loading secrets...
[36m[2019-04-28 20:23:21 DEBUG][39m Secrets loaded
[36m[2019-04-28 20:23:21 DEBUG][39m Initializing controls
[32m[2019-04-28 20:23:21 INFO][39m Steady state hypothesis: Application responds
[32m[2019-04-28 20:23:21 INFO][39m Probe: we-can-request-echo
[36m[2019-04-28 20:23:21 DEBUG][39m   => succeeded with '{'status': 200, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Sun, 28 Apr 2019 17:23:21 GMT', 'Content-Type': 'application/json', 'Content-Length': '29', 'Connection': 'keep-alive'}, 'body': {'Status': 'Up and running!'}}'
[36m[2019-04-28 20:23:21 DEBUG][39m allowed tolerance is 200
[32m[2019-04-28 20:23:21 INFO][39m Steady state hypothesis is met!
[32m[2019-04-28 20:23:21 INFO][39m Action: stop-master-db
[36m[2019-04-28 20:23:21 DEBUG][39m Running: /usr/local/bin/docker docker ps -qf 'name=master' > pid.info
[36m[2019-04-28 20:23:21 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-04-28 20:23:21 DEBUG][39m   => succeeded with '{'status': 125, 'stdout': '', 'stderr': 'unknown shorthand flag: \'q\' in -qf\nSee \'docker --help\'.\n\nUsage:\tdocker [OPTIONS] COMMAND\n\nA self-sufficient runtime for containers\n\nOptions:\n      --config string      Location of client config files (default "/Users/adhorn/.docker")\n  -D, --debug              Enable debug mode\n  -H, --host list          Daemon socket(s) to connect to\n  -l, --log-level string   Set the logging level ("debug"|"info"|"warn"|"error"|"fatal") (default "info")\n      --tls                Use TLS; implied by --tlsverify\n      --tlscacert string   Trust certs signed only by this CA (default "/Users/adhorn/.docker/ca.pem")\n      --tlscert string     Path to TLS certificate file (default "/Users/adhorn/.docker/cert.pem")\n      --tlskey string      Path to TLS key file (default "/Users/adhorn/.docker/key.pem")\n      --tlsverify          Use TLS and verify the remote\n  -v, --version            Print version information and quit\n\nManagement Commands:\n  builder     Manage builds\n  checkpoint  Manage checkpoints\n  config      Manage Docker configs\n  container   Manage containers\n  image       Manage images\n  manifest    Manage Docker image manifests and manifest lists\n  network     Manage networks\n  node        Manage Swarm nodes\n  plugin      Manage plugins\n  secret      Manage Docker secrets\n  service     Manage services\n  stack       Manage Docker stacks\n  swarm       Manage Swarm\n  system      Manage Docker\n  trust       Manage trust on Docker images\n  volume      Manage volumes\n\nCommands:\n  attach      Attach local standard input, output, and error streams to a running container\n  build       Build an image from a Dockerfile\n  commit      Create a new image from a container\'s changes\n  cp          Copy files/folders between a container and the local filesystem\n  create      Create a new container\n  deploy      Deploy a new stack or update an existing stack\n  diff        Inspect changes to files or directories on a container\'s filesystem\n  events      Get real time events from the server\n  exec        Run a command in a running container\n  export      Export a container\'s filesystem as a tar archive\n  history     Show the history of an image\n  images      List images\n  import      Import the contents from a tarball to create a filesystem image\n  info        Display system-wide information\n  inspect     Return low-level information on Docker objects\n  kill        Kill one or more running containers\n  load        Load an image from a tar archive or STDIN\n  login       Log in to a Docker registry\n  logout      Log out from a Docker registry\n  logs        Fetch the logs of a container\n  pause       Pause all processes within one or more containers\n  port        List port mappings or a specific mapping for the container\n  ps          List containers\n  pull        Pull an image or a repository from a registry\n  push        Push an image or a repository to a registry\n  rename      Rename a container\n  restart     Restart one or more containers\n  rm          Remove one or more containers\n  rmi         Remove one or more images\n  run         Run a command in a new container\n  save        Save one or more images to a tar archive (streamed to STDOUT by default)\n  search      Search the Docker Hub for images\n  start       Start one or more stopped containers\n  stats       Display a live stream of container(s) resource usage statistics\n  stop        Stop one or more running containers\n  tag         Create a tag TARGET_IMAGE that refers to SOURCE_IMAGE\n  top         Display the running processes of a container\n  unpause     Unpause all processes within one or more containers\n  update      Update configuration of one or more containers\n  version     Show the Docker version information\n  wait        Block until one or more containers stop, then print their exit codes\n\nRun \'docker COMMAND --help\' for more information on a command.\n\n'}'
[32m[2019-04-28 20:23:21 INFO][39m Pausing after activity for 1s...
[32m[2019-04-28 20:23:22 INFO][39m Action: stop-master-db
[36m[2019-04-28 20:23:22 DEBUG][39m Running: /usr/local/bin/docker stop $(cat pid.info)
[36m[2019-04-28 20:23:22 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-04-28 20:23:22 DEBUG][39m   => succeeded with '{'status': 1, 'stdout': '', 'stderr': '"docker stop" requires at least 1 argument.\nSee \'docker stop --help\'.\n\nUsage:  docker stop [OPTIONS] CONTAINER [CONTAINER...]\n\nStop one or more running containers\n'}'
[32m[2019-04-28 20:23:22 INFO][39m Pausing after activity for 10s...
[32m[2019-04-28 20:23:32 INFO][39m Probe: read-status
[36m[2019-04-28 20:23:32 DEBUG][39m Running: /Users/adhorn/.pyenv/shims/http get http://127.0.0.1:80/api/echo
[36m[2019-04-28 20:23:33 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-04-28 20:23:33 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '{"Status": "Up and running!"}', 'stderr': ''}'
[32m[2019-04-28 20:23:33 INFO][39m Action: restart-master-db
[36m[2019-04-28 20:23:33 DEBUG][39m Running: /usr/local/bin/docker start $(cat pid.info)
[36m[2019-04-28 20:23:33 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-04-28 20:23:33 DEBUG][39m   => succeeded with '{'status': 1, 'stdout': '', 'stderr': '"docker start" requires at least 1 argument.\nSee \'docker start --help\'.\n\nUsage:  docker start [OPTIONS] CONTAINER [CONTAINER...]\n\nStart one or more stopped containers\n'}'
[32m[2019-04-28 20:23:33 INFO][39m Pausing after activity for 10s...
[32m[2019-04-28 20:23:43 INFO][39m Probe: read-status
[36m[2019-04-28 20:23:43 DEBUG][39m Running: /Users/adhorn/.pyenv/shims/http get http://127.0.0.1:80/api/echo
[36m[2019-04-28 20:23:43 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-04-28 20:23:43 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '{"Status": "Up and running!"}', 'stderr': ''}'
[32m[2019-04-28 20:23:43 INFO][39m Steady state hypothesis: Application responds
[32m[2019-04-28 20:23:43 INFO][39m Probe: we-can-request-echo
[36m[2019-04-28 20:23:43 DEBUG][39m   => succeeded with '{'status': 200, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Sun, 28 Apr 2019 17:23:43 GMT', 'Content-Type': 'application/json', 'Content-Length': '29', 'Connection': 'keep-alive'}, 'body': {'Status': 'Up and running!'}}'
[36m[2019-04-28 20:23:43 DEBUG][39m allowed tolerance is 200
[32m[2019-04-28 20:23:43 INFO][39m Steady state hypothesis is met!
[32m[2019-04-28 20:23:43 INFO][39m Let's rollback...
[32m[2019-04-28 20:23:43 INFO][39m Rollback: restart-master-db
[32m[2019-04-28 20:23:43 INFO][39m Action: restart-master-db
[36m[2019-04-28 20:23:43 DEBUG][39m Running: /usr/local/bin/docker start $(cat pid.info)
[36m[2019-04-28 20:23:43 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-04-28 20:23:43 DEBUG][39m   => succeeded with '{'status': 1, 'stdout': '', 'stderr': '"docker start" requires at least 1 argument.\nSee \'docker start --help\'.\n\nUsage:  docker start [OPTIONS] CONTAINER [CONTAINER...]\n\nStart one or more stopped containers\n'}'
[32m[2019-04-28 20:23:43 INFO][39m Experiment ended with status: completed
[36m[2019-04-28 20:23:43 DEBUG][39m Cleaning up controls
[36m[2019-04-28 20:23:43 DEBUG][39m Clearing activities cache
[36m[2019-04-28 20:24:33 DEBUG][39m ###############################################################################
[36m[2019-04-28 20:24:33 DEBUG][39m Running command 'run'
[36m[2019-04-28 20:24:33 DEBUG][39m Using settings file '/Users/adhorn/.chaostoolkit/settings.yaml'
[36m[2019-04-28 20:24:33 DEBUG][39m The Chaos Toolkit settings file could not be found at '/Users/adhorn/.chaostoolkit/settings.yaml'.
[36m[2019-04-28 20:24:33 DEBUG][39m Building activity cache...
[36m[2019-04-28 20:24:33 DEBUG][39m Cached 4 activities
[32m[2019-04-28 20:24:33 INFO][39m Validating the experiment's syntax
[36m[2019-04-28 20:24:33 DEBUG][39m Loading configuration...
[36m[2019-04-28 20:24:33 DEBUG][39m Loading secrets...
[36m[2019-04-28 20:24:33 DEBUG][39m Secrets loaded
[32m[2019-04-28 20:24:33 INFO][39m Experiment looks valid
[36m[2019-04-28 20:24:33 DEBUG][39m Clearing activities cache
[36m[2019-04-28 20:24:33 DEBUG][39m Building activity cache...
[36m[2019-04-28 20:24:33 DEBUG][39m Cached 4 activities
[32m[2019-04-28 20:24:33 INFO][39m Running experiment: What is the impact of an terminating the database master
[36m[2019-04-28 20:24:33 DEBUG][39m Loading configuration...
[36m[2019-04-28 20:24:33 DEBUG][39m Loading secrets...
[36m[2019-04-28 20:24:33 DEBUG][39m Secrets loaded
[36m[2019-04-28 20:24:33 DEBUG][39m Initializing controls
[32m[2019-04-28 20:24:33 INFO][39m Steady state hypothesis: Application responds
[32m[2019-04-28 20:24:33 INFO][39m Probe: we-can-request-echo
[36m[2019-04-28 20:24:33 DEBUG][39m   => succeeded with '{'status': 200, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Sun, 28 Apr 2019 17:24:33 GMT', 'Content-Type': 'application/json', 'Content-Length': '29', 'Connection': 'keep-alive'}, 'body': {'Status': 'Up and running!'}}'
[36m[2019-04-28 20:24:33 DEBUG][39m allowed tolerance is 200
[32m[2019-04-28 20:24:33 INFO][39m Steady state hypothesis is met!
[32m[2019-04-28 20:24:33 INFO][39m Action: stop-master-db
[36m[2019-04-28 20:24:33 DEBUG][39m Running: /usr/local/bin/docker ps -qf 'name=master' > pid.info
[36m[2019-04-28 20:24:34 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '', 'stderr': ''}'
[32m[2019-04-28 20:24:34 INFO][39m Pausing after activity for 1s...
[32m[2019-04-28 20:24:35 INFO][39m Action: stop-master-db
[36m[2019-04-28 20:24:35 DEBUG][39m Running: /usr/local/bin/docker stop $(cat pid.info)
[36m[2019-04-28 20:24:45 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-04-28 20:24:45 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '1767ac307d47\n', 'stderr': ''}'
[32m[2019-04-28 20:24:45 INFO][39m Pausing after activity for 10s...
[32m[2019-04-28 20:24:55 INFO][39m Probe: read-status
[36m[2019-04-28 20:24:55 DEBUG][39m Running: /Users/adhorn/.pyenv/shims/http get http://127.0.0.1:80/api/echo
[36m[2019-04-28 20:24:56 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-04-28 20:24:56 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '{"Status": "Up and running!"}', 'stderr': ''}'
[32m[2019-04-28 20:24:56 INFO][39m Action: restart-master-db
[36m[2019-04-28 20:24:56 DEBUG][39m Running: /usr/local/bin/docker start $(cat pid.info)
[36m[2019-04-28 20:24:56 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-04-28 20:24:56 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '1767ac307d47\n', 'stderr': ''}'
[32m[2019-04-28 20:24:56 INFO][39m Pausing after activity for 10s...
[32m[2019-04-28 20:25:06 INFO][39m Probe: read-status
[36m[2019-04-28 20:25:06 DEBUG][39m Running: /Users/adhorn/.pyenv/shims/http get http://127.0.0.1:80/api/echo
[36m[2019-04-28 20:25:07 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-04-28 20:25:07 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '{"Status": "Up and running!"}', 'stderr': ''}'
[32m[2019-04-28 20:25:07 INFO][39m Steady state hypothesis: Application responds
[32m[2019-04-28 20:25:07 INFO][39m Probe: we-can-request-echo
[36m[2019-04-28 20:25:07 DEBUG][39m   => succeeded with '{'status': 200, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Sun, 28 Apr 2019 17:25:07 GMT', 'Content-Type': 'application/json', 'Content-Length': '29', 'Connection': 'keep-alive'}, 'body': {'Status': 'Up and running!'}}'
[36m[2019-04-28 20:25:07 DEBUG][39m allowed tolerance is 200
[32m[2019-04-28 20:25:07 INFO][39m Steady state hypothesis is met!
[32m[2019-04-28 20:25:07 INFO][39m Let's rollback...
[32m[2019-04-28 20:25:07 INFO][39m Rollback: restart-master-db
[32m[2019-04-28 20:25:07 INFO][39m Action: restart-master-db
[36m[2019-04-28 20:25:07 DEBUG][39m Running: /usr/local/bin/docker start $(cat pid.info)
[36m[2019-04-28 20:25:07 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-04-28 20:25:07 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '1767ac307d47\n', 'stderr': ''}'
[32m[2019-04-28 20:25:07 INFO][39m Experiment ended with status: completed
[36m[2019-04-28 20:25:07 DEBUG][39m Cleaning up controls
[36m[2019-04-28 20:25:07 DEBUG][39m Clearing activities cache
[36m[2019-04-28 20:29:37 DEBUG][39m ###############################################################################
[36m[2019-04-28 20:29:37 DEBUG][39m Running command 'run'
[36m[2019-04-28 20:29:37 DEBUG][39m Using settings file '/Users/adhorn/.chaostoolkit/settings.yaml'
[36m[2019-04-28 20:29:37 DEBUG][39m The Chaos Toolkit settings file could not be found at '/Users/adhorn/.chaostoolkit/settings.yaml'.
[36m[2019-04-28 20:29:37 DEBUG][39m Building activity cache...
[36m[2019-04-28 20:29:37 DEBUG][39m Cached 4 activities
[32m[2019-04-28 20:29:37 INFO][39m Validating the experiment's syntax
[36m[2019-04-28 20:29:37 DEBUG][39m Loading configuration...
[36m[2019-04-28 20:29:37 DEBUG][39m Loading secrets...
[36m[2019-04-28 20:29:37 DEBUG][39m Secrets loaded
[32m[2019-04-28 20:29:37 INFO][39m Experiment looks valid
[36m[2019-04-28 20:29:37 DEBUG][39m Clearing activities cache
[36m[2019-04-28 20:29:37 DEBUG][39m Building activity cache...
[36m[2019-04-28 20:29:37 DEBUG][39m Cached 4 activities
[32m[2019-04-28 20:29:37 INFO][39m Running experiment: What is the impact of an terminating the database master
[36m[2019-04-28 20:29:37 DEBUG][39m Loading configuration...
[36m[2019-04-28 20:29:37 DEBUG][39m Loading secrets...
[36m[2019-04-28 20:29:37 DEBUG][39m Secrets loaded
[36m[2019-04-28 20:29:37 DEBUG][39m Initializing controls
[32m[2019-04-28 20:29:37 INFO][39m Steady state hypothesis: Application responds
[32m[2019-04-28 20:29:37 INFO][39m Probe: we-can-request-echo
[36m[2019-04-28 20:29:37 DEBUG][39m   => succeeded with '{'status': 200, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Sun, 28 Apr 2019 17:29:37 GMT', 'Content-Type': 'application/json', 'Content-Length': '29', 'Connection': 'keep-alive'}, 'body': {'Status': 'Up and running!'}}'
[36m[2019-04-28 20:29:37 DEBUG][39m allowed tolerance is 200
[32m[2019-04-28 20:29:37 INFO][39m Steady state hypothesis is met!
[32m[2019-04-28 20:29:37 INFO][39m Action: stop-master-db
[36m[2019-04-28 20:29:37 DEBUG][39m Running: /usr/local/bin/docker ps -qf 'name=master' > pid.info
[36m[2019-04-28 20:29:37 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '', 'stderr': ''}'
[32m[2019-04-28 20:29:37 INFO][39m Pausing after activity for 1s...
[32m[2019-04-28 20:29:38 INFO][39m Action: stop-master-db
[36m[2019-04-28 20:29:38 DEBUG][39m Running: /usr/local/bin/docker stop $(cat pid.info)
[36m[2019-04-28 20:29:49 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-04-28 20:29:49 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '1767ac307d47\n', 'stderr': ''}'
[32m[2019-04-28 20:29:49 INFO][39m Pausing after activity for 10s...
[32m[2019-04-28 20:29:59 INFO][39m Probe: read-status
[36m[2019-04-28 20:29:59 DEBUG][39m Running: /Users/adhorn/.pyenv/shims/http get http://127.0.0.1:80/api/echo
[36m[2019-04-28 20:29:59 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-04-28 20:29:59 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '{"Status": "Up and running!"}', 'stderr': ''}'
[32m[2019-04-28 20:29:59 INFO][39m Pausing after activity for 1s...
[32m[2019-04-28 20:30:00 INFO][39m Action: restart-master-db
[36m[2019-04-28 20:30:00 DEBUG][39m Running: /usr/local/bin/docker start $(cat pid.info)
[36m[2019-04-28 20:30:01 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-04-28 20:30:01 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '1767ac307d47\n', 'stderr': ''}'
[32m[2019-04-28 20:30:01 INFO][39m Pausing after activity for 10s...
[32m[2019-04-28 20:30:11 INFO][39m Probe: read-status
[36m[2019-04-28 20:30:11 DEBUG][39m Running: /Users/adhorn/.pyenv/shims/http get http://127.0.0.1:80/api/echo
[36m[2019-04-28 20:30:11 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-04-28 20:30:11 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '{"Status": "Up and running!"}', 'stderr': ''}'
[32m[2019-04-28 20:30:11 INFO][39m Steady state hypothesis: Application responds
[32m[2019-04-28 20:30:11 INFO][39m Probe: we-can-request-echo
[36m[2019-04-28 20:30:11 DEBUG][39m   => succeeded with '{'status': 200, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Sun, 28 Apr 2019 17:30:11 GMT', 'Content-Type': 'application/json', 'Content-Length': '29', 'Connection': 'keep-alive'}, 'body': {'Status': 'Up and running!'}}'
[36m[2019-04-28 20:30:11 DEBUG][39m allowed tolerance is 200
[32m[2019-04-28 20:30:11 INFO][39m Steady state hypothesis is met!
[32m[2019-04-28 20:30:11 INFO][39m Let's rollback...
[32m[2019-04-28 20:30:11 INFO][39m Rollback: restart-master-db
[32m[2019-04-28 20:30:11 INFO][39m Action: restart-master-db
[36m[2019-04-28 20:30:11 DEBUG][39m Running: /usr/local/bin/docker start $(cat pid.info)
[36m[2019-04-28 20:30:11 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-04-28 20:30:11 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '1767ac307d47\n', 'stderr': ''}'
[32m[2019-04-28 20:30:11 INFO][39m Experiment ended with status: completed
[36m[2019-04-28 20:30:11 DEBUG][39m Cleaning up controls
[36m[2019-04-28 20:30:11 DEBUG][39m Clearing activities cache
[36m[2019-04-28 20:31:54 DEBUG][39m ###############################################################################
[36m[2019-04-28 20:31:54 DEBUG][39m Running command 'run'
[36m[2019-04-28 20:31:54 DEBUG][39m Using settings file '/Users/adhorn/.chaostoolkit/settings.yaml'
[36m[2019-04-28 20:31:54 DEBUG][39m The Chaos Toolkit settings file could not be found at '/Users/adhorn/.chaostoolkit/settings.yaml'.
[36m[2019-04-28 20:31:54 DEBUG][39m Building activity cache...
[36m[2019-04-28 20:31:54 DEBUG][39m Cached 4 activities
[32m[2019-04-28 20:31:54 INFO][39m Validating the experiment's syntax
[36m[2019-04-28 20:31:54 DEBUG][39m Loading configuration...
[36m[2019-04-28 20:31:54 DEBUG][39m Loading secrets...
[36m[2019-04-28 20:31:54 DEBUG][39m Secrets loaded
[32m[2019-04-28 20:31:54 INFO][39m Experiment looks valid
[36m[2019-04-28 20:31:54 DEBUG][39m Clearing activities cache
[36m[2019-04-28 20:31:54 DEBUG][39m Building activity cache...
[36m[2019-04-28 20:31:54 DEBUG][39m Cached 4 activities
[32m[2019-04-28 20:31:54 INFO][39m Running experiment: What is the impact of an terminating the database master
[36m[2019-04-28 20:31:54 DEBUG][39m Loading configuration...
[36m[2019-04-28 20:31:54 DEBUG][39m Loading secrets...
[36m[2019-04-28 20:31:54 DEBUG][39m Secrets loaded
[36m[2019-04-28 20:31:54 DEBUG][39m Initializing controls
[32m[2019-04-28 20:31:54 INFO][39m Steady state hypothesis: Application responds
[32m[2019-04-28 20:31:54 INFO][39m Probe: we-can-request-echo
[36m[2019-04-28 20:31:54 DEBUG][39m   => succeeded with '{'status': 200, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Sun, 28 Apr 2019 17:31:54 GMT', 'Content-Type': 'application/json', 'Content-Length': '29', 'Connection': 'keep-alive'}, 'body': {'Status': 'Up and running!'}}'
[36m[2019-04-28 20:31:54 DEBUG][39m allowed tolerance is 200
[32m[2019-04-28 20:31:54 INFO][39m Steady state hypothesis is met!
[32m[2019-04-28 20:31:54 INFO][39m Action: stop-master-db
[36m[2019-04-28 20:31:54 DEBUG][39m Running: /usr/local/bin/docker ps -qf 'name=master' > pid.info
[36m[2019-04-28 20:31:54 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '', 'stderr': ''}'
[32m[2019-04-28 20:31:54 INFO][39m Pausing after activity for 1s...
[32m[2019-04-28 20:31:55 INFO][39m Action: stop-master-db
[36m[2019-04-28 20:31:55 DEBUG][39m Running: /usr/local/bin/docker stop $(cat pid.info)
[36m[2019-04-28 20:32:06 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-04-28 20:32:06 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '1767ac307d47\n', 'stderr': ''}'
[32m[2019-04-28 20:32:06 INFO][39m Pausing after activity for 10s...
[32m[2019-04-28 20:32:16 INFO][39m Probe: read-status
[36m[2019-04-28 20:32:16 DEBUG][39m Running: /Users/adhorn/.pyenv/shims/http get http://127.0.0.1:80/api/echo
[36m[2019-04-28 20:32:16 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-04-28 20:32:16 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '{"Status": "Up and running!"}', 'stderr': ''}'
[32m[2019-04-28 20:32:16 INFO][39m Pausing after activity for 1s...
[32m[2019-04-28 20:32:17 INFO][39m Probe: read-status
[36m[2019-04-28 20:32:17 DEBUG][39m Running: /Users/adhorn/.pyenv/shims/http get http://127.0.0.1:80/api/health
[36m[2019-04-28 20:32:21 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-04-28 20:32:21 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '{"results": [{"checker": "db_master_check", "expires": 1556472756.4682662, "output": "<class \'sqlalchemy.exc.OperationalError\'>", "timestamp": 1556472741.4682662, "passed": false}, {"checker": "db_slave_check", "expires": 1556472756.475954, "output": "db slave ok", "timestamp": 1556472741.475954, "passed": true}, {"checker": "redis_check", "expires": 1556472756.4988923, "output": "redis ok", "timestamp": 1556472741.4988923, "passed": true}, {"checker": "task_check", "expires": 1556472756.5098495, "output": "tasks ok", "timestamp": 1556472741.5098495, "passed": true}], "hostname": "172.17.0.7", "status": "failure"}', 'stderr': ''}'
[32m[2019-04-28 20:32:21 INFO][39m Pausing after activity for 1s...
[32m[2019-04-28 20:32:22 INFO][39m Action: restart-master-db
[36m[2019-04-28 20:32:22 DEBUG][39m Running: /usr/local/bin/docker start $(cat pid.info)
[36m[2019-04-28 20:32:23 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-04-28 20:32:23 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '1767ac307d47\n', 'stderr': ''}'
[32m[2019-04-28 20:32:23 INFO][39m Pausing after activity for 10s...
[32m[2019-04-28 20:32:33 INFO][39m Probe: read-status
[36m[2019-04-28 20:32:33 DEBUG][39m Running: /Users/adhorn/.pyenv/shims/http get http://127.0.0.1:80/api/echo
[36m[2019-04-28 20:32:33 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-04-28 20:32:33 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '{"Status": "Up and running!"}', 'stderr': ''}'
[32m[2019-04-28 20:32:33 INFO][39m Steady state hypothesis: Application responds
[32m[2019-04-28 20:32:33 INFO][39m Probe: we-can-request-echo
[36m[2019-04-28 20:32:33 DEBUG][39m   => succeeded with '{'status': 200, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Sun, 28 Apr 2019 17:32:33 GMT', 'Content-Type': 'application/json', 'Content-Length': '29', 'Connection': 'keep-alive'}, 'body': {'Status': 'Up and running!'}}'
[36m[2019-04-28 20:32:33 DEBUG][39m allowed tolerance is 200
[32m[2019-04-28 20:32:33 INFO][39m Steady state hypothesis is met!
[32m[2019-04-28 20:32:33 INFO][39m Let's rollback...
[32m[2019-04-28 20:32:33 INFO][39m Rollback: restart-master-db
[32m[2019-04-28 20:32:33 INFO][39m Action: restart-master-db
[36m[2019-04-28 20:32:33 DEBUG][39m Running: /usr/local/bin/docker start $(cat pid.info)
[36m[2019-04-28 20:32:33 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-04-28 20:32:33 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '1767ac307d47\n', 'stderr': ''}'
[32m[2019-04-28 20:32:33 INFO][39m Experiment ended with status: completed
[36m[2019-04-28 20:32:33 DEBUG][39m Cleaning up controls
[36m[2019-04-28 20:32:33 DEBUG][39m Clearing activities cache
[36m[2019-04-28 20:38:24 DEBUG][39m ###############################################################################
[36m[2019-04-28 20:38:24 DEBUG][39m Running command 'run'
[36m[2019-04-28 20:38:24 DEBUG][39m Using settings file '/Users/adhorn/.chaostoolkit/settings.yaml'
[36m[2019-04-28 20:38:25 DEBUG][39m The Chaos Toolkit settings file could not be found at '/Users/adhorn/.chaostoolkit/settings.yaml'.
[36m[2019-04-28 20:38:25 DEBUG][39m Building activity cache...
[36m[2019-04-28 20:38:25 DEBUG][39m Cached 5 activities
[32m[2019-04-28 20:38:25 INFO][39m Validating the experiment's syntax
[36m[2019-04-28 20:38:25 DEBUG][39m Loading configuration...
[36m[2019-04-28 20:38:25 DEBUG][39m Loading secrets...
[36m[2019-04-28 20:38:25 DEBUG][39m Secrets loaded
[32m[2019-04-28 20:38:25 INFO][39m Experiment looks valid
[36m[2019-04-28 20:38:25 DEBUG][39m Clearing activities cache
[36m[2019-04-28 20:38:25 DEBUG][39m Building activity cache...
[36m[2019-04-28 20:38:25 DEBUG][39m Cached 5 activities
[32m[2019-04-28 20:38:25 INFO][39m Running experiment: What is the impact of an terminating the database master
[36m[2019-04-28 20:38:25 DEBUG][39m Loading configuration...
[36m[2019-04-28 20:38:25 DEBUG][39m Loading secrets...
[36m[2019-04-28 20:38:25 DEBUG][39m Secrets loaded
[36m[2019-04-28 20:38:25 DEBUG][39m Initializing controls
[32m[2019-04-28 20:38:25 INFO][39m Steady state hypothesis: Application responds
[32m[2019-04-28 20:38:25 INFO][39m Probe: we-can-request-echo
[36m[2019-04-28 20:38:25 DEBUG][39m   => succeeded with '{'status': 200, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Sun, 28 Apr 2019 17:38:25 GMT', 'Content-Type': 'text/html; charset=utf-8', 'Content-Length': '593', 'Connection': 'keep-alive', 'Retry-After': '30'}, 'body': '{"results": [{"checker": "db_master_check", "expires": 1556473120.8614779, "output": "db master ok", "timestamp": 1556473105.8614779, "passed": true}, {"checker": "db_slave_check", "expires": 1556473120.8656838, "output": "db slave ok", "timestamp": 1556473105.8656838, "passed": true}, {"checker": "redis_check", "expires": 1556473120.8671987, "output": "redis ok", "timestamp": 1556473105.8671987, "passed": true}, {"checker": "task_check", "expires": 1556473120.8809226, "output": "tasks ok", "timestamp": 1556473105.8809226, "passed": true}], "hostname": "172.17.0.7", "status": "success"}'}'
[36m[2019-04-28 20:38:25 DEBUG][39m allowed tolerance is 200
[32m[2019-04-28 20:38:25 INFO][39m Steady state hypothesis is met!
[32m[2019-04-28 20:38:25 INFO][39m Action: stop-master-db
[36m[2019-04-28 20:38:25 DEBUG][39m Running: /usr/local/bin/docker ps -qf 'name=master' > pid.info
[36m[2019-04-28 20:38:26 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '', 'stderr': ''}'
[32m[2019-04-28 20:38:26 INFO][39m Pausing after activity for 1s...
[32m[2019-04-28 20:38:27 INFO][39m Action: stop-master-db
[36m[2019-04-28 20:38:27 DEBUG][39m Running: /usr/local/bin/docker stop $(cat pid.info)
[36m[2019-04-28 20:38:38 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-04-28 20:38:38 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '1767ac307d47\n', 'stderr': ''}'
[32m[2019-04-28 20:38:38 INFO][39m Pausing after activity for 10s...
[32m[2019-04-28 20:38:48 INFO][39m Probe: read-echo
[36m[2019-04-28 20:38:48 DEBUG][39m   => succeeded with '{'status': 200, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Sun, 28 Apr 2019 17:38:48 GMT', 'Content-Type': 'application/json', 'Content-Length': '29', 'Connection': 'keep-alive'}, 'body': {'Status': 'Up and running!'}}'
[32m[2019-04-28 20:38:48 INFO][39m Pausing after activity for 1s...
[32m[2019-04-28 20:38:49 INFO][39m Probe: read-health
[33m[2019-04-28 20:38:49 WARNING][39m This HTTP call returned a response with a HTTP status code above 400. This may indicate some error and not what you expected. Please have a look at the logs.
[36m[2019-04-28 20:38:49 DEBUG][39m   => succeeded with '{'status': 503, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Sun, 28 Apr 2019 17:38:49 GMT', 'Content-Type': 'text/html; charset=utf-8', 'Content-Length': '619', 'Connection': 'keep-alive', 'Retry-After': '30'}, 'body': '{"results": [{"checker": "db_master_check", "expires": 1556473144.0702088, "output": "<class \'sqlalchemy.exc.OperationalError\'>", "timestamp": 1556473129.0702088, "passed": false}, {"checker": "db_slave_check", "expires": 1556473144.079439, "output": "db slave ok", "timestamp": 1556473129.079439, "passed": true}, {"checker": "redis_check", "expires": 1556473144.0822704, "output": "redis ok", "timestamp": 1556473129.0822704, "passed": true}, {"checker": "task_check", "expires": 1556473144.094755, "output": "tasks ok", "timestamp": 1556473129.094755, "passed": true}], "hostname": "172.17.0.7", "status": "failure"}'}'
[32m[2019-04-28 20:38:49 INFO][39m Pausing after activity for 1s...
[32m[2019-04-28 20:38:50 INFO][39m Action: restart-master-db
[36m[2019-04-28 20:38:50 DEBUG][39m Running: /usr/local/bin/docker start $(cat pid.info)
[36m[2019-04-28 20:38:50 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-04-28 20:38:50 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '1767ac307d47\n', 'stderr': ''}'
[32m[2019-04-28 20:38:50 INFO][39m Pausing after activity for 10s...
[32m[2019-04-28 20:39:00 INFO][39m Probe: read-echo
[36m[2019-04-28 20:39:00 DEBUG][39m   => succeeded with '{'status': 200, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Sun, 28 Apr 2019 17:39:00 GMT', 'Content-Type': 'application/json', 'Content-Length': '29', 'Connection': 'keep-alive'}, 'body': {'Status': 'Up and running!'}}'
[32m[2019-04-28 20:39:00 INFO][39m Steady state hypothesis: Application responds
[32m[2019-04-28 20:39:00 INFO][39m Probe: we-can-request-echo
[36m[2019-04-28 20:39:00 DEBUG][39m   => succeeded with '{'status': 503, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Sun, 28 Apr 2019 17:39:00 GMT', 'Content-Type': 'text/html; charset=utf-8', 'Content-Length': '619', 'Connection': 'keep-alive', 'Retry-After': '30'}, 'body': '{"results": [{"checker": "db_master_check", "expires": 1556473144.0702088, "output": "<class \'sqlalchemy.exc.OperationalError\'>", "timestamp": 1556473129.0702088, "passed": false}, {"checker": "db_slave_check", "expires": 1556473144.079439, "output": "db slave ok", "timestamp": 1556473129.079439, "passed": true}, {"checker": "redis_check", "expires": 1556473144.0822704, "output": "redis ok", "timestamp": 1556473129.0822704, "passed": true}, {"checker": "task_check", "expires": 1556473144.094755, "output": "tasks ok", "timestamp": 1556473129.094755, "passed": true}], "hostname": "172.17.0.7", "status": "failure"}'}'
[36m[2019-04-28 20:39:00 DEBUG][39m allowed tolerance is 200
[31m[2019-04-28 20:39:00 CRITICAL][39m Steady state probe 'we-can-request-echo' is not in the given tolerance so failing this experiment
[32m[2019-04-28 20:39:00 INFO][39m Let's rollback...
[32m[2019-04-28 20:39:00 INFO][39m Rollback: restart-master-db
[32m[2019-04-28 20:39:00 INFO][39m Action: restart-master-db
[36m[2019-04-28 20:39:00 DEBUG][39m Running: /usr/local/bin/docker start $(cat pid.info)
[36m[2019-04-28 20:39:00 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-04-28 20:39:00 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '1767ac307d47\n', 'stderr': ''}'
[32m[2019-04-28 20:39:00 INFO][39m Experiment ended with status: deviated
[32m[2019-04-28 20:39:00 INFO][39m The steady-state has deviated, a weakness may have been discovered
[36m[2019-04-28 20:39:00 DEBUG][39m Cleaning up controls
[36m[2019-04-28 20:39:00 DEBUG][39m Clearing activities cache
[36m[2019-04-29 22:21:12 DEBUG][39m ###############################################################################
[36m[2019-04-29 22:21:12 DEBUG][39m Running command 'run'
[36m[2019-04-29 22:21:12 DEBUG][39m Using settings file '/Users/adhorn/.chaostoolkit/settings.yaml'
[36m[2019-04-29 22:21:13 DEBUG][39m The Chaos Toolkit settings file could not be found at '/Users/adhorn/.chaostoolkit/settings.yaml'.
[36m[2019-04-29 22:21:13 DEBUG][39m Building activity cache...
[36m[2019-04-29 22:21:13 DEBUG][39m Cached 5 activities
[32m[2019-04-29 22:21:13 INFO][39m Validating the experiment's syntax
[36m[2019-04-29 22:21:13 DEBUG][39m Loading configuration...
[36m[2019-04-29 22:21:13 DEBUG][39m Loading secrets...
[36m[2019-04-29 22:21:13 DEBUG][39m Secrets loaded
[32m[2019-04-29 22:21:13 INFO][39m Experiment looks valid
[36m[2019-04-29 22:21:13 DEBUG][39m Clearing activities cache
[36m[2019-04-29 22:21:13 DEBUG][39m Building activity cache...
[36m[2019-04-29 22:21:13 DEBUG][39m Cached 5 activities
[32m[2019-04-29 22:21:13 INFO][39m Running experiment: What is the impact of an terminating the database master
[36m[2019-04-29 22:21:13 DEBUG][39m Loading configuration...
[36m[2019-04-29 22:21:13 DEBUG][39m Loading secrets...
[36m[2019-04-29 22:21:13 DEBUG][39m Secrets loaded
[36m[2019-04-29 22:21:13 DEBUG][39m Initializing controls
[32m[2019-04-29 22:21:13 INFO][39m Steady state hypothesis: Application responds
[32m[2019-04-29 22:21:13 INFO][39m Probe: we-can-request-health
[36m[2019-04-29 22:21:13 DEBUG][39m   => succeeded with '{'status': 200, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Mon, 29 Apr 2019 20:21:13 GMT', 'Content-Type': 'text/html; charset=utf-8', 'Content-Length': '593', 'Connection': 'keep-alive', 'Retry-After': '30'}, 'body': '{"results": [{"checker": "db_master_check", "expires": 1556569288.2678492, "passed": true, "timestamp": 1556569273.2678492, "output": "db master ok"}, {"checker": "db_slave_check", "expires": 1556569288.3006642, "passed": true, "timestamp": 1556569273.3006642, "output": "db slave ok"}, {"checker": "redis_check", "expires": 1556569288.3133876, "passed": true, "timestamp": 1556569273.3133876, "output": "redis ok"}, {"checker": "task_check", "expires": 1556569288.3535326, "passed": true, "timestamp": 1556569273.3535326, "output": "tasks ok"}], "hostname": "172.17.0.7", "status": "success"}'}'
[36m[2019-04-29 22:21:13 DEBUG][39m allowed tolerance is 200
[32m[2019-04-29 22:21:13 INFO][39m Steady state hypothesis is met!
[32m[2019-04-29 22:21:13 INFO][39m Action: stop-master-db
[36m[2019-04-29 22:21:13 DEBUG][39m Running: /usr/local/bin/docker ps -qf 'name=master' > pid.info
[36m[2019-04-29 22:21:13 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '', 'stderr': ''}'
[32m[2019-04-29 22:21:13 INFO][39m Pausing after activity for 1s...
[32m[2019-04-29 22:21:14 INFO][39m Action: stop-master-db
[36m[2019-04-29 22:21:14 DEBUG][39m Running: /usr/local/bin/docker stop $(cat pid.info)
[36m[2019-04-29 22:21:25 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-04-29 22:21:25 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': 'af8dfb66c085\n', 'stderr': ''}'
[32m[2019-04-29 22:21:25 INFO][39m Pausing after activity for 10s...
[32m[2019-04-29 22:21:35 INFO][39m Probe: read-echo
[36m[2019-04-29 22:21:35 DEBUG][39m   => succeeded with '{'status': 200, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Mon, 29 Apr 2019 20:21:35 GMT', 'Content-Type': 'application/json', 'Content-Length': '31', 'Connection': 'keep-alive'}, 'body': {'Status': 'Up and running...'}}'
[32m[2019-04-29 22:21:35 INFO][39m Pausing after activity for 1s...
[32m[2019-04-29 22:21:36 INFO][39m Probe: read-health
[36m[2019-04-29 22:21:41 DEBUG][39m Activity failed
    Traceback (most recent call last):
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/urllib3/connectionpool.py", line 384, in _make_request
        six.raise_from(e, None)
      File "<string>", line 2, in raise_from
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/urllib3/connectionpool.py", line 380, in _make_request
        httplib_response = conn.getresponse()
      File "/Users/adhorn/.pyenv/versions/3.7.1/lib/python3.7/http/client.py", line 1321, in getresponse
        response.begin()
      File "/Users/adhorn/.pyenv/versions/3.7.1/lib/python3.7/http/client.py", line 296, in begin
        version, status, reason = self._read_status()
      File "/Users/adhorn/.pyenv/versions/3.7.1/lib/python3.7/http/client.py", line 257, in _read_status
        line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
      File "/Users/adhorn/.pyenv/versions/3.7.1/lib/python3.7/socket.py", line 589, in readinto
        return self._sock.recv_into(b)
    socket.timeout: timed out
    
    During handling of the above exception, another exception occurred:
    
    Traceback (most recent call last):
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/requests/adapters.py", line 449, in send
        timeout=timeout
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/urllib3/connectionpool.py", line 638, in urlopen
        _stacktrace=sys.exc_info()[2])
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/urllib3/util/retry.py", line 367, in increment
        raise six.reraise(type(error), error, _stacktrace)
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/urllib3/packages/six.py", line 686, in reraise
        raise value
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/urllib3/connectionpool.py", line 600, in urlopen
        chunked=chunked)
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/urllib3/connectionpool.py", line 386, in _make_request
        self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/urllib3/connectionpool.py", line 306, in _raise_timeout
        raise ReadTimeoutError(self, url, "Read timed out. (read timeout=%s)" % timeout_value)
    urllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='127.0.0.1', port=80): Read timed out. (read timeout=5)
    
    During handling of the above exception, another exception occurred:
    
    Traceback (most recent call last):
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/chaoslib/provider/http.py", line 48, in run_http_activity
        verify=verify_tls)
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/requests/api.py", line 75, in get
        return request('get', url, params=params, **kwargs)
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/requests/api.py", line 60, in request
        return session.request(method=method, url=url, **kwargs)
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/requests/sessions.py", line 533, in request
        resp = self.send(prep, **send_kwargs)
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/requests/sessions.py", line 646, in send
        r = adapter.send(request, **kwargs)
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/requests/adapters.py", line 529, in send
        raise ReadTimeout(e, request=request)
    requests.exceptions.ReadTimeout: HTTPConnectionPool(host='127.0.0.1', port=80): Read timed out. (read timeout=5)
    
    During handling of the above exception, another exception occurred:
    
    Traceback (most recent call last):
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/chaoslib/activity.py", line 223, in run_activity
        result = run_http_activity(activity, configuration, secrets)
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/chaoslib/provider/http.py", line 84, in run_http_activity
        raise ActivityFailed("activity took too long to complete")
    chaoslib.exceptions.ActivityFailed: activity took too long to complete
[31m[2019-04-29 22:21:41 ERROR][39m   => failed: activity took too long to complete
[32m[2019-04-29 22:21:41 INFO][39m Pausing after activity for 1s...
[32m[2019-04-29 22:21:42 INFO][39m Action: restart-master-db
[36m[2019-04-29 22:21:42 DEBUG][39m Running: /usr/local/bin/docker start $(cat pid.info)
[36m[2019-04-29 22:21:42 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-04-29 22:21:42 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': 'af8dfb66c085\n', 'stderr': ''}'
[32m[2019-04-29 22:21:42 INFO][39m Pausing after activity for 10s...
[32m[2019-04-29 22:21:52 INFO][39m Probe: read-health
[36m[2019-04-29 22:21:52 DEBUG][39m   => succeeded with '{'status': 200, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Mon, 29 Apr 2019 20:21:52 GMT', 'Content-Type': 'text/html; charset=utf-8', 'Content-Length': '591', 'Connection': 'keep-alive', 'Retry-After': '30'}, 'body': '{"results": [{"checker": "db_master_check", "expires": 1556569327.7516234, "passed": true, "timestamp": 1556569312.7516234, "output": "db master ok"}, {"checker": "db_slave_check", "expires": 1556569327.7892952, "passed": true, "timestamp": 1556569312.7892952, "output": "db slave ok"}, {"checker": "redis_check", "expires": 1556569327.7999232, "passed": true, "timestamp": 1556569312.7999232, "output": "redis ok"}, {"checker": "task_check", "expires": 1556569327.853342, "passed": true, "timestamp": 1556569312.853342, "output": "tasks ok"}], "hostname": "172.17.0.7", "status": "success"}'}'
[32m[2019-04-29 22:21:52 INFO][39m Steady state hypothesis: Application responds
[32m[2019-04-29 22:21:52 INFO][39m Probe: we-can-request-health
[36m[2019-04-29 22:21:52 DEBUG][39m   => succeeded with '{'status': 503, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Mon, 29 Apr 2019 20:21:52 GMT', 'Content-Type': 'text/html; charset=utf-8', 'Content-Length': '623', 'Connection': 'keep-alive', 'Retry-After': '30'}, 'body': '{"results": [{"checker": "db_master_check", "expires": 1556569327.8796918, "passed": false, "timestamp": 1556569312.8796918, "output": "<class \'sqlalchemy.exc.OperationalError\'>"}, {"checker": "db_slave_check", "expires": 1556569327.8835547, "passed": true, "timestamp": 1556569312.8835547, "output": "db slave ok"}, {"checker": "redis_check", "expires": 1556569327.8849905, "passed": true, "timestamp": 1556569312.8849905, "output": "redis ok"}, {"checker": "task_check", "expires": 1556569327.8965094, "passed": true, "timestamp": 1556569312.8965094, "output": "tasks ok"}], "hostname": "172.17.0.7", "status": "failure"}'}'
[36m[2019-04-29 22:21:52 DEBUG][39m allowed tolerance is 200
[31m[2019-04-29 22:21:52 CRITICAL][39m Steady state probe 'we-can-request-health' is not in the given tolerance so failing this experiment
[32m[2019-04-29 22:21:52 INFO][39m Let's rollback...
[32m[2019-04-29 22:21:52 INFO][39m Rollback: restart-master-db
[32m[2019-04-29 22:21:52 INFO][39m Action: restart-master-db
[36m[2019-04-29 22:21:52 DEBUG][39m Running: /usr/local/bin/docker start $(cat pid.info)
[36m[2019-04-29 22:21:52 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-04-29 22:21:52 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': 'af8dfb66c085\n', 'stderr': ''}'
[32m[2019-04-29 22:21:52 INFO][39m Experiment ended with status: deviated
[32m[2019-04-29 22:21:52 INFO][39m The steady-state has deviated, a weakness may have been discovered
[36m[2019-04-29 22:21:52 DEBUG][39m Cleaning up controls
[36m[2019-04-29 22:21:52 DEBUG][39m Clearing activities cache
[36m[2019-04-29 22:22:24 DEBUG][39m ###############################################################################
[36m[2019-04-29 22:22:24 DEBUG][39m Running command 'run'
[36m[2019-04-29 22:22:24 DEBUG][39m Using settings file '/Users/adhorn/.chaostoolkit/settings.yaml'
[36m[2019-04-29 22:22:25 DEBUG][39m The Chaos Toolkit settings file could not be found at '/Users/adhorn/.chaostoolkit/settings.yaml'.
[36m[2019-04-29 22:22:25 DEBUG][39m Building activity cache...
[36m[2019-04-29 22:22:25 DEBUG][39m Cached 5 activities
[32m[2019-04-29 22:22:25 INFO][39m Validating the experiment's syntax
[36m[2019-04-29 22:22:25 DEBUG][39m Loading configuration...
[36m[2019-04-29 22:22:25 DEBUG][39m Loading secrets...
[36m[2019-04-29 22:22:25 DEBUG][39m Secrets loaded
[32m[2019-04-29 22:22:25 INFO][39m Experiment looks valid
[36m[2019-04-29 22:22:25 DEBUG][39m Clearing activities cache
[36m[2019-04-29 22:22:25 DEBUG][39m Building activity cache...
[36m[2019-04-29 22:22:25 DEBUG][39m Cached 5 activities
[32m[2019-04-29 22:22:25 INFO][39m Running experiment: What is the impact of an terminating the database master
[36m[2019-04-29 22:22:25 DEBUG][39m Loading configuration...
[36m[2019-04-29 22:22:25 DEBUG][39m Loading secrets...
[36m[2019-04-29 22:22:25 DEBUG][39m Secrets loaded
[36m[2019-04-29 22:22:25 DEBUG][39m Initializing controls
[32m[2019-04-29 22:22:25 INFO][39m Steady state hypothesis: Application responds
[32m[2019-04-29 22:22:25 INFO][39m Probe: we-can-request-health
[36m[2019-04-29 22:22:25 DEBUG][39m   => succeeded with '{'status': 503, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Mon, 29 Apr 2019 20:22:25 GMT', 'Content-Type': 'text/html; charset=utf-8', 'Content-Length': '623', 'Connection': 'keep-alive', 'Retry-After': '30'}, 'body': '{"results": [{"checker": "db_master_check", "expires": 1556569360.3298905, "passed": false, "timestamp": 1556569345.3298905, "output": "<class \'sqlalchemy.exc.OperationalError\'>"}, {"checker": "db_slave_check", "expires": 1556569360.3357327, "passed": true, "timestamp": 1556569345.3357327, "output": "db slave ok"}, {"checker": "redis_check", "expires": 1556569360.3371956, "passed": true, "timestamp": 1556569345.3371956, "output": "redis ok"}, {"checker": "task_check", "expires": 1556569360.3509367, "passed": true, "timestamp": 1556569345.3509367, "output": "tasks ok"}], "hostname": "172.17.0.7", "status": "failure"}'}'
[36m[2019-04-29 22:22:25 DEBUG][39m allowed tolerance is 200
[31m[2019-04-29 22:22:25 CRITICAL][39m Steady state probe 'we-can-request-health' is not in the given tolerance so failing this experiment
[32m[2019-04-29 22:22:25 INFO][39m Let's rollback...
[32m[2019-04-29 22:22:25 INFO][39m Rollback: restart-master-db
[32m[2019-04-29 22:22:25 INFO][39m Action: restart-master-db
[36m[2019-04-29 22:22:25 DEBUG][39m Running: /usr/local/bin/docker start $(cat pid.info)
[36m[2019-04-29 22:22:25 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-04-29 22:22:25 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': 'af8dfb66c085\n', 'stderr': ''}'
[32m[2019-04-29 22:22:25 INFO][39m Experiment ended with status: failed
[36m[2019-04-29 22:22:25 DEBUG][39m Cleaning up controls
[36m[2019-04-29 22:22:25 DEBUG][39m Clearing activities cache
[36m[2019-05-06 18:15:44 DEBUG][39m ###############################################################################
[36m[2019-05-06 18:15:44 DEBUG][39m Running command 'run'
[36m[2019-05-06 18:15:44 DEBUG][39m Using settings file '/Users/adhorn/.chaostoolkit/settings.yaml'
[33m[2019-05-06 18:15:45 WARNING][39m 
    There is a new version (1.2.0) of the chaostoolkit available.
    You may upgrade by typing:
    
    $ pip install -U chaostoolkit
    
    Please review changes at https://github.com/chaostoolkit/chaostoolkit/blob/master/CHANGELOG.md
    
[36m[2019-05-06 18:15:45 DEBUG][39m The Chaos Toolkit settings file could not be found at '/Users/adhorn/.chaostoolkit/settings.yaml'.
[36m[2019-05-06 18:15:45 DEBUG][39m Building activity cache...
[36m[2019-05-06 18:15:45 DEBUG][39m Cached 5 activities
[32m[2019-05-06 18:15:45 INFO][39m Validating the experiment's syntax
[36m[2019-05-06 18:15:45 DEBUG][39m Loading configuration...
[36m[2019-05-06 18:15:45 DEBUG][39m Loading secrets...
[36m[2019-05-06 18:15:45 DEBUG][39m Secrets loaded
[32m[2019-05-06 18:15:45 INFO][39m Experiment looks valid
[36m[2019-05-06 18:15:45 DEBUG][39m Clearing activities cache
[36m[2019-05-06 18:15:45 DEBUG][39m Building activity cache...
[36m[2019-05-06 18:15:45 DEBUG][39m Cached 5 activities
[32m[2019-05-06 18:15:45 INFO][39m Running experiment: What is the impact of an terminating the database master
[36m[2019-05-06 18:15:45 DEBUG][39m Loading configuration...
[36m[2019-05-06 18:15:45 DEBUG][39m Loading secrets...
[36m[2019-05-06 18:15:45 DEBUG][39m Secrets loaded
[36m[2019-05-06 18:15:45 DEBUG][39m Initializing controls
[32m[2019-05-06 18:15:45 INFO][39m Steady state hypothesis: Application responds
[32m[2019-05-06 18:15:45 INFO][39m Probe: we-can-request-health
[36m[2019-05-06 18:15:46 DEBUG][39m   => succeeded with '{'status': 200, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Mon, 06 May 2019 16:15:46 GMT', 'Content-Type': 'text/html; charset=utf-8', 'Content-Length': '591', 'Connection': 'keep-alive', 'Retry-After': '30'}, 'body': '{"status": "success", "hostname": "172.17.0.6", "results": [{"timestamp": 1557159345.957721, "checker": "db_master_check", "output": "db master ok", "passed": true, "expires": 1557159360.957721}, {"timestamp": 1557159345.9844618, "checker": "db_slave_check", "output": "db slave ok", "passed": true, "expires": 1557159360.9844618}, {"timestamp": 1557159345.9975932, "checker": "redis_check", "output": "redis ok", "passed": true, "expires": 1557159360.9975932}, {"timestamp": 1557159346.1044748, "checker": "task_check", "output": "tasks ok", "passed": true, "expires": 1557159361.1044748}]}'}'
[36m[2019-05-06 18:15:46 DEBUG][39m allowed tolerance is 200
[32m[2019-05-06 18:15:46 INFO][39m Steady state hypothesis is met!
[32m[2019-05-06 18:15:46 INFO][39m Action: stop-master-db
[36m[2019-05-06 18:15:46 DEBUG][39m Running: /usr/local/bin/docker ps -qf 'name=master' > pid.info
[36m[2019-05-06 18:15:46 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '', 'stderr': ''}'
[32m[2019-05-06 18:15:46 INFO][39m Pausing after activity for 1s...
[32m[2019-05-06 18:15:47 INFO][39m Action: stop-master-db
[36m[2019-05-06 18:15:47 DEBUG][39m Running: /usr/local/bin/docker stop $(cat pid.info)
[36m[2019-05-06 18:15:57 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-05-06 18:15:57 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '0114114b41bb\n', 'stderr': ''}'
[32m[2019-05-06 18:15:57 INFO][39m Pausing after activity for 10s...
[32m[2019-05-06 18:16:07 INFO][39m Probe: read-echo
[36m[2019-05-06 18:16:07 DEBUG][39m   => succeeded with '{'status': 200, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Mon, 06 May 2019 16:16:07 GMT', 'Content-Type': 'application/json', 'Content-Length': '31', 'Connection': 'keep-alive'}, 'body': {'Status': 'Up and running...'}}'
[32m[2019-05-06 18:16:07 INFO][39m Pausing after activity for 1s...
[32m[2019-05-06 18:16:08 INFO][39m Probe: read-health
[33m[2019-05-06 18:16:08 WARNING][39m This HTTP call returned a response with a HTTP status code above 400. This may indicate some error and not what you expected. Please have a look at the logs.
[36m[2019-05-06 18:16:08 DEBUG][39m   => succeeded with '{'status': 503, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Mon, 06 May 2019 16:16:09 GMT', 'Content-Type': 'text/html; charset=utf-8', 'Content-Length': '621', 'Connection': 'keep-alive', 'Retry-After': '30'}, 'body': '{"status": "failure", "hostname": "172.17.0.6", "results": [{"timestamp": 1557159368.9763012, "checker": "db_master_check", "output": "<class \'sqlalchemy.exc.OperationalError\'>", "passed": false, "expires": 1557159383.9763012}, {"timestamp": 1557159368.9821875, "checker": "db_slave_check", "output": "db slave ok", "passed": true, "expires": 1557159383.9821875}, {"timestamp": 1557159368.983816, "checker": "redis_check", "output": "redis ok", "passed": true, "expires": 1557159383.983816}, {"timestamp": 1557159369.0115728, "checker": "task_check", "output": "tasks ok", "passed": true, "expires": 1557159384.0115728}]}'}'
[32m[2019-05-06 18:16:08 INFO][39m Pausing after activity for 1s...
[32m[2019-05-06 18:16:09 INFO][39m Action: restart-master-db
[36m[2019-05-06 18:16:09 DEBUG][39m Running: /usr/local/bin/docker start $(cat pid.info)
[36m[2019-05-06 18:16:10 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-05-06 18:16:10 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '0114114b41bb\n', 'stderr': ''}'
[32m[2019-05-06 18:16:10 INFO][39m Pausing after activity for 10s...
[32m[2019-05-06 18:16:20 INFO][39m Probe: read-health
[33m[2019-05-06 18:16:20 WARNING][39m This HTTP call returned a response with a HTTP status code above 400. This may indicate some error and not what you expected. Please have a look at the logs.
[36m[2019-05-06 18:16:20 DEBUG][39m   => succeeded with '{'status': 503, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Mon, 06 May 2019 16:16:20 GMT', 'Content-Type': 'text/html; charset=utf-8', 'Content-Length': '621', 'Connection': 'keep-alive', 'Retry-After': '30'}, 'body': '{"status": "failure", "hostname": "172.17.0.6", "results": [{"timestamp": 1557159380.628799, "checker": "db_master_check", "output": "<class \'sqlalchemy.exc.OperationalError\'>", "passed": false, "expires": 1557159395.628799}, {"timestamp": 1557159380.6722515, "checker": "db_slave_check", "output": "db slave ok", "passed": true, "expires": 1557159395.6722515}, {"timestamp": 1557159380.6889024, "checker": "redis_check", "output": "redis ok", "passed": true, "expires": 1557159395.6889024}, {"timestamp": 1557159380.7304065, "checker": "task_check", "output": "tasks ok", "passed": true, "expires": 1557159395.7304065}]}'}'
[32m[2019-05-06 18:16:20 INFO][39m Steady state hypothesis: Application responds
[32m[2019-05-06 18:16:20 INFO][39m Probe: we-can-request-health
[36m[2019-05-06 18:16:20 DEBUG][39m   => succeeded with '{'status': 503, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Mon, 06 May 2019 16:16:20 GMT', 'Content-Type': 'text/html; charset=utf-8', 'Content-Length': '621', 'Connection': 'keep-alive', 'Retry-After': '30'}, 'body': '{"status": "failure", "hostname": "172.17.0.6", "results": [{"timestamp": 1557159368.9763012, "checker": "db_master_check", "output": "<class \'sqlalchemy.exc.OperationalError\'>", "passed": false, "expires": 1557159383.9763012}, {"timestamp": 1557159368.9821875, "checker": "db_slave_check", "output": "db slave ok", "passed": true, "expires": 1557159383.9821875}, {"timestamp": 1557159368.983816, "checker": "redis_check", "output": "redis ok", "passed": true, "expires": 1557159383.983816}, {"timestamp": 1557159369.0115728, "checker": "task_check", "output": "tasks ok", "passed": true, "expires": 1557159384.0115728}]}'}'
[36m[2019-05-06 18:16:20 DEBUG][39m allowed tolerance is 200
[31m[2019-05-06 18:16:20 CRITICAL][39m Steady state probe 'we-can-request-health' is not in the given tolerance so failing this experiment
[32m[2019-05-06 18:16:20 INFO][39m Let's rollback...
[32m[2019-05-06 18:16:20 INFO][39m Rollback: restart-master-db
[32m[2019-05-06 18:16:20 INFO][39m Action: restart-master-db
[36m[2019-05-06 18:16:20 DEBUG][39m Running: /usr/local/bin/docker start $(cat pid.info)
[36m[2019-05-06 18:16:20 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-05-06 18:16:20 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '0114114b41bb\n', 'stderr': ''}'
[32m[2019-05-06 18:16:20 INFO][39m Experiment ended with status: deviated
[32m[2019-05-06 18:16:20 INFO][39m The steady-state has deviated, a weakness may have been discovered
[36m[2019-05-06 18:16:20 DEBUG][39m Cleaning up controls
[36m[2019-05-06 18:16:20 DEBUG][39m Clearing activities cache
[36m[2019-05-08 12:47:45 DEBUG][39m ###############################################################################
[36m[2019-05-08 12:47:45 DEBUG][39m Running command 'run'
[36m[2019-05-08 12:47:45 DEBUG][39m Using settings file '/Users/adhorn/.chaostoolkit/settings.yaml'
[33m[2019-05-08 12:47:46 WARNING][39m 
    There is a new version (1.2.0) of the chaostoolkit available.
    You may upgrade by typing:
    
    $ pip install -U chaostoolkit
    
    Please review changes at https://github.com/chaostoolkit/chaostoolkit/blob/master/CHANGELOG.md
    
[36m[2019-05-08 12:47:46 DEBUG][39m The Chaos Toolkit settings file could not be found at '/Users/adhorn/.chaostoolkit/settings.yaml'.
[36m[2019-05-08 12:47:46 DEBUG][39m Building activity cache...
[36m[2019-05-08 12:47:46 DEBUG][39m Cached 5 activities
[32m[2019-05-08 12:47:46 INFO][39m Validating the experiment's syntax
[36m[2019-05-08 12:47:46 DEBUG][39m Loading configuration...
[36m[2019-05-08 12:47:46 DEBUG][39m Loading secrets...
[36m[2019-05-08 12:47:46 DEBUG][39m Secrets loaded
[32m[2019-05-08 12:47:46 INFO][39m Experiment looks valid
[36m[2019-05-08 12:47:46 DEBUG][39m Clearing activities cache
[36m[2019-05-08 12:47:46 DEBUG][39m Building activity cache...
[36m[2019-05-08 12:47:46 DEBUG][39m Cached 5 activities
[32m[2019-05-08 12:47:46 INFO][39m Running experiment: What is the impact of an terminating the database master
[36m[2019-05-08 12:47:46 DEBUG][39m Loading configuration...
[36m[2019-05-08 12:47:46 DEBUG][39m Loading secrets...
[36m[2019-05-08 12:47:46 DEBUG][39m Secrets loaded
[36m[2019-05-08 12:47:46 DEBUG][39m Initializing controls
[32m[2019-05-08 12:47:46 INFO][39m Steady state hypothesis: Application responds
[32m[2019-05-08 12:47:46 INFO][39m Probe: we-can-request-health
[36m[2019-05-08 12:47:46 DEBUG][39m   => succeeded with '{'status': 200, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Wed, 08 May 2019 11:47:46 GMT', 'Content-Type': 'text/html; charset=utf-8', 'Content-Length': '593', 'Connection': 'keep-alive', 'Retry-After': '30'}, 'body': '{"status": "success", "hostname": "172.17.0.7", "results": [{"timestamp": 1557316066.6840847, "checker": "db_master_check", "passed": true, "output": "db master ok", "expires": 1557316081.6840847}, {"timestamp": 1557316066.7211556, "checker": "db_slave_check", "passed": true, "output": "db slave ok", "expires": 1557316081.7211556}, {"timestamp": 1557316066.7328336, "checker": "redis_check", "passed": true, "output": "redis ok", "expires": 1557316081.7328336}, {"timestamp": 1557316066.8065789, "checker": "task_check", "passed": true, "output": "tasks ok", "expires": 1557316081.8065789}]}'}'
[36m[2019-05-08 12:47:46 DEBUG][39m allowed tolerance is 200
[32m[2019-05-08 12:47:46 INFO][39m Steady state hypothesis is met!
[32m[2019-05-08 12:47:46 INFO][39m Action: stop-master-db
[36m[2019-05-08 12:47:46 DEBUG][39m Running: /usr/local/bin/docker ps -qf 'name=master' > pid.info
[36m[2019-05-08 12:47:47 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '', 'stderr': ''}'
[32m[2019-05-08 12:47:47 INFO][39m Pausing after activity for 1s...
[32m[2019-05-08 12:47:48 INFO][39m Action: stop-master-db
[36m[2019-05-08 12:47:48 DEBUG][39m Running: /usr/local/bin/docker stop $(cat pid.info)
[36m[2019-05-08 12:47:52 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-05-08 12:47:52 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '3100bb45f64d\n', 'stderr': ''}'
[32m[2019-05-08 12:47:52 INFO][39m Pausing after activity for 10s...
[32m[2019-05-08 12:48:02 INFO][39m Probe: read-echo
[36m[2019-05-08 12:48:02 DEBUG][39m   => succeeded with '{'status': 200, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Wed, 08 May 2019 11:48:02 GMT', 'Content-Type': 'application/json', 'Content-Length': '31', 'Connection': 'keep-alive'}, 'body': {'Status': 'Up and running...'}}'
[32m[2019-05-08 12:48:02 INFO][39m Pausing after activity for 1s...
[32m[2019-05-08 12:48:03 INFO][39m Probe: read-health
[36m[2019-05-08 12:48:08 DEBUG][39m Activity failed
    Traceback (most recent call last):
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/urllib3/connectionpool.py", line 384, in _make_request
        six.raise_from(e, None)
      File "<string>", line 2, in raise_from
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/urllib3/connectionpool.py", line 380, in _make_request
        httplib_response = conn.getresponse()
      File "/Users/adhorn/.pyenv/versions/3.7.1/lib/python3.7/http/client.py", line 1321, in getresponse
        response.begin()
      File "/Users/adhorn/.pyenv/versions/3.7.1/lib/python3.7/http/client.py", line 296, in begin
        version, status, reason = self._read_status()
      File "/Users/adhorn/.pyenv/versions/3.7.1/lib/python3.7/http/client.py", line 257, in _read_status
        line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
      File "/Users/adhorn/.pyenv/versions/3.7.1/lib/python3.7/socket.py", line 589, in readinto
        return self._sock.recv_into(b)
    socket.timeout: timed out
    
    During handling of the above exception, another exception occurred:
    
    Traceback (most recent call last):
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/requests/adapters.py", line 449, in send
        timeout=timeout
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/urllib3/connectionpool.py", line 638, in urlopen
        _stacktrace=sys.exc_info()[2])
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/urllib3/util/retry.py", line 367, in increment
        raise six.reraise(type(error), error, _stacktrace)
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/urllib3/packages/six.py", line 686, in reraise
        raise value
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/urllib3/connectionpool.py", line 600, in urlopen
        chunked=chunked)
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/urllib3/connectionpool.py", line 386, in _make_request
        self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/urllib3/connectionpool.py", line 306, in _raise_timeout
        raise ReadTimeoutError(self, url, "Read timed out. (read timeout=%s)" % timeout_value)
    urllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='127.0.0.1', port=80): Read timed out. (read timeout=5)
    
    During handling of the above exception, another exception occurred:
    
    Traceback (most recent call last):
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/chaoslib/provider/http.py", line 48, in run_http_activity
        verify=verify_tls)
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/requests/api.py", line 75, in get
        return request('get', url, params=params, **kwargs)
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/requests/api.py", line 60, in request
        return session.request(method=method, url=url, **kwargs)
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/requests/sessions.py", line 533, in request
        resp = self.send(prep, **send_kwargs)
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/requests/sessions.py", line 646, in send
        r = adapter.send(request, **kwargs)
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/requests/adapters.py", line 529, in send
        raise ReadTimeout(e, request=request)
    requests.exceptions.ReadTimeout: HTTPConnectionPool(host='127.0.0.1', port=80): Read timed out. (read timeout=5)
    
    During handling of the above exception, another exception occurred:
    
    Traceback (most recent call last):
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/chaoslib/activity.py", line 223, in run_activity
        result = run_http_activity(activity, configuration, secrets)
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/chaoslib/provider/http.py", line 84, in run_http_activity
        raise ActivityFailed("activity took too long to complete")
    chaoslib.exceptions.ActivityFailed: activity took too long to complete
[31m[2019-05-08 12:48:08 ERROR][39m   => failed: activity took too long to complete
[32m[2019-05-08 12:48:08 INFO][39m Pausing after activity for 1s...
[32m[2019-05-08 12:48:09 INFO][39m Action: restart-master-db
[36m[2019-05-08 12:48:09 DEBUG][39m Running: /usr/local/bin/docker start $(cat pid.info)
[36m[2019-05-08 12:48:10 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-05-08 12:48:10 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '3100bb45f64d\n', 'stderr': ''}'
[32m[2019-05-08 12:48:10 INFO][39m Pausing after activity for 10s...
[32m[2019-05-08 12:48:20 INFO][39m Probe: read-health
[33m[2019-05-08 12:48:20 WARNING][39m This HTTP call returned a response with a HTTP status code above 400. This may indicate some error and not what you expected. Please have a look at the logs.
[36m[2019-05-08 12:48:20 DEBUG][39m   => succeeded with '{'status': 503, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Wed, 08 May 2019 11:48:20 GMT', 'Content-Type': 'text/html; charset=utf-8', 'Content-Length': '621', 'Connection': 'keep-alive', 'Retry-After': '30'}, 'body': '{"status": "failure", "hostname": "172.17.0.7", "results": [{"timestamp": 1557316100.304679, "checker": "db_master_check", "passed": false, "output": "<class \'sqlalchemy.exc.OperationalError\'>", "expires": 1557316115.304679}, {"timestamp": 1557316100.3145545, "checker": "db_slave_check", "passed": true, "output": "db slave ok", "expires": 1557316115.3145545}, {"timestamp": 1557316100.3184805, "checker": "redis_check", "passed": true, "output": "redis ok", "expires": 1557316115.3184805}, {"timestamp": 1557316100.3290825, "checker": "task_check", "passed": true, "output": "tasks ok", "expires": 1557316115.3290825}]}'}'
[32m[2019-05-08 12:48:20 INFO][39m Steady state hypothesis: Application responds
[32m[2019-05-08 12:48:20 INFO][39m Probe: we-can-request-health
[36m[2019-05-08 12:48:20 DEBUG][39m   => succeeded with '{'status': 503, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Wed, 08 May 2019 11:48:20 GMT', 'Content-Type': 'text/html; charset=utf-8', 'Content-Length': '621', 'Connection': 'keep-alive', 'Retry-After': '30'}, 'body': '{"status": "failure", "hostname": "172.17.0.7", "results": [{"timestamp": 1557316100.304679, "checker": "db_master_check", "passed": false, "output": "<class \'sqlalchemy.exc.OperationalError\'>", "expires": 1557316115.304679}, {"timestamp": 1557316100.3145545, "checker": "db_slave_check", "passed": true, "output": "db slave ok", "expires": 1557316115.3145545}, {"timestamp": 1557316100.3184805, "checker": "redis_check", "passed": true, "output": "redis ok", "expires": 1557316115.3184805}, {"timestamp": 1557316100.3290825, "checker": "task_check", "passed": true, "output": "tasks ok", "expires": 1557316115.3290825}]}'}'
[36m[2019-05-08 12:48:20 DEBUG][39m allowed tolerance is 200
[31m[2019-05-08 12:48:20 CRITICAL][39m Steady state probe 'we-can-request-health' is not in the given tolerance so failing this experiment
[32m[2019-05-08 12:48:20 INFO][39m Let's rollback...
[32m[2019-05-08 12:48:20 INFO][39m Rollback: restart-master-db
[32m[2019-05-08 12:48:20 INFO][39m Action: restart-master-db
[36m[2019-05-08 12:48:20 DEBUG][39m Running: /usr/local/bin/docker start $(cat pid.info)
[36m[2019-05-08 12:48:20 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-05-08 12:48:20 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '3100bb45f64d\n', 'stderr': ''}'
[32m[2019-05-08 12:48:20 INFO][39m Experiment ended with status: deviated
[32m[2019-05-08 12:48:20 INFO][39m The steady-state has deviated, a weakness may have been discovered
[36m[2019-05-08 12:48:20 DEBUG][39m Cleaning up controls
[36m[2019-05-08 12:48:20 DEBUG][39m Clearing activities cache
[36m[2019-05-08 12:48:44 DEBUG][39m ###############################################################################
[36m[2019-05-08 12:48:44 DEBUG][39m Running command 'run'
[36m[2019-05-08 12:48:44 DEBUG][39m Using settings file '/Users/adhorn/.chaostoolkit/settings.yaml'
[33m[2019-05-08 12:48:45 WARNING][39m 
    There is a new version (1.2.0) of the chaostoolkit available.
    You may upgrade by typing:
    
    $ pip install -U chaostoolkit
    
    Please review changes at https://github.com/chaostoolkit/chaostoolkit/blob/master/CHANGELOG.md
    
[36m[2019-05-08 12:48:45 DEBUG][39m The Chaos Toolkit settings file could not be found at '/Users/adhorn/.chaostoolkit/settings.yaml'.
[36m[2019-05-08 12:48:45 DEBUG][39m Building activity cache...
[36m[2019-05-08 12:48:45 DEBUG][39m Cached 5 activities
[32m[2019-05-08 12:48:45 INFO][39m Validating the experiment's syntax
[36m[2019-05-08 12:48:45 DEBUG][39m Loading configuration...
[36m[2019-05-08 12:48:45 DEBUG][39m Loading secrets...
[36m[2019-05-08 12:48:45 DEBUG][39m Secrets loaded
[32m[2019-05-08 12:48:45 INFO][39m Experiment looks valid
[36m[2019-05-08 12:48:45 DEBUG][39m Clearing activities cache
[36m[2019-05-08 12:48:45 DEBUG][39m Building activity cache...
[36m[2019-05-08 12:48:45 DEBUG][39m Cached 5 activities
[32m[2019-05-08 12:48:45 INFO][39m Running experiment: What is the impact of an terminating the database master
[36m[2019-05-08 12:48:45 DEBUG][39m Loading configuration...
[36m[2019-05-08 12:48:45 DEBUG][39m Loading secrets...
[36m[2019-05-08 12:48:45 DEBUG][39m Secrets loaded
[36m[2019-05-08 12:48:45 DEBUG][39m Initializing controls
[32m[2019-05-08 12:48:45 INFO][39m Steady state hypothesis: Application responds
[32m[2019-05-08 12:48:45 INFO][39m Probe: we-can-request-health
[36m[2019-05-08 12:48:45 DEBUG][39m   => succeeded with '{'status': 200, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Wed, 08 May 2019 11:48:45 GMT', 'Content-Type': 'text/html; charset=utf-8', 'Content-Length': '591', 'Connection': 'keep-alive', 'Retry-After': '30'}, 'body': '{"status": "success", "hostname": "172.17.0.7", "results": [{"timestamp": 1557316125.0903907, "checker": "db_master_check", "passed": true, "output": "db master ok", "expires": 1557316140.0903907}, {"timestamp": 1557316125.1370244, "checker": "db_slave_check", "passed": true, "output": "db slave ok", "expires": 1557316140.1370244}, {"timestamp": 1557316125.1572134, "checker": "redis_check", "passed": true, "output": "redis ok", "expires": 1557316140.1572134}, {"timestamp": 1557316125.226185, "checker": "task_check", "passed": true, "output": "tasks ok", "expires": 1557316140.226185}]}'}'
[36m[2019-05-08 12:48:45 DEBUG][39m allowed tolerance is 200
[32m[2019-05-08 12:48:45 INFO][39m Steady state hypothesis is met!
[32m[2019-05-08 12:48:45 INFO][39m Action: stop-master-db
[36m[2019-05-08 12:48:45 DEBUG][39m Running: /usr/local/bin/docker ps -qf 'name=master' > pid.info
[36m[2019-05-08 12:48:45 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '', 'stderr': ''}'
[32m[2019-05-08 12:48:45 INFO][39m Pausing after activity for 1s...
[32m[2019-05-08 12:48:46 INFO][39m Action: stop-master-db
[36m[2019-05-08 12:48:46 DEBUG][39m Running: /usr/local/bin/docker stop $(cat pid.info)
[36m[2019-05-08 12:48:50 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-05-08 12:48:50 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '3100bb45f64d\n', 'stderr': ''}'
[32m[2019-05-08 12:48:50 INFO][39m Pausing after activity for 10s...
[32m[2019-05-08 12:49:00 INFO][39m Probe: read-echo
[36m[2019-05-08 12:49:00 DEBUG][39m   => succeeded with '{'status': 200, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Wed, 08 May 2019 11:49:00 GMT', 'Content-Type': 'application/json', 'Content-Length': '31', 'Connection': 'keep-alive'}, 'body': {'Status': 'Up and running...'}}'
[32m[2019-05-08 12:49:00 INFO][39m Pausing after activity for 1s...
[32m[2019-05-08 12:49:01 INFO][39m Probe: read-health
[36m[2019-05-08 12:49:06 DEBUG][39m Activity failed
    Traceback (most recent call last):
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/urllib3/connectionpool.py", line 384, in _make_request
        six.raise_from(e, None)
      File "<string>", line 2, in raise_from
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/urllib3/connectionpool.py", line 380, in _make_request
        httplib_response = conn.getresponse()
      File "/Users/adhorn/.pyenv/versions/3.7.1/lib/python3.7/http/client.py", line 1321, in getresponse
        response.begin()
      File "/Users/adhorn/.pyenv/versions/3.7.1/lib/python3.7/http/client.py", line 296, in begin
        version, status, reason = self._read_status()
      File "/Users/adhorn/.pyenv/versions/3.7.1/lib/python3.7/http/client.py", line 257, in _read_status
        line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
      File "/Users/adhorn/.pyenv/versions/3.7.1/lib/python3.7/socket.py", line 589, in readinto
        return self._sock.recv_into(b)
    socket.timeout: timed out
    
    During handling of the above exception, another exception occurred:
    
    Traceback (most recent call last):
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/requests/adapters.py", line 449, in send
        timeout=timeout
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/urllib3/connectionpool.py", line 638, in urlopen
        _stacktrace=sys.exc_info()[2])
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/urllib3/util/retry.py", line 367, in increment
        raise six.reraise(type(error), error, _stacktrace)
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/urllib3/packages/six.py", line 686, in reraise
        raise value
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/urllib3/connectionpool.py", line 600, in urlopen
        chunked=chunked)
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/urllib3/connectionpool.py", line 386, in _make_request
        self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/urllib3/connectionpool.py", line 306, in _raise_timeout
        raise ReadTimeoutError(self, url, "Read timed out. (read timeout=%s)" % timeout_value)
    urllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='127.0.0.1', port=80): Read timed out. (read timeout=5)
    
    During handling of the above exception, another exception occurred:
    
    Traceback (most recent call last):
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/chaoslib/provider/http.py", line 48, in run_http_activity
        verify=verify_tls)
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/requests/api.py", line 75, in get
        return request('get', url, params=params, **kwargs)
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/requests/api.py", line 60, in request
        return session.request(method=method, url=url, **kwargs)
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/requests/sessions.py", line 533, in request
        resp = self.send(prep, **send_kwargs)
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/requests/sessions.py", line 646, in send
        r = adapter.send(request, **kwargs)
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/requests/adapters.py", line 529, in send
        raise ReadTimeout(e, request=request)
    requests.exceptions.ReadTimeout: HTTPConnectionPool(host='127.0.0.1', port=80): Read timed out. (read timeout=5)
    
    During handling of the above exception, another exception occurred:
    
    Traceback (most recent call last):
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/chaoslib/activity.py", line 223, in run_activity
        result = run_http_activity(activity, configuration, secrets)
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/chaoslib/provider/http.py", line 84, in run_http_activity
        raise ActivityFailed("activity took too long to complete")
    chaoslib.exceptions.ActivityFailed: activity took too long to complete
[31m[2019-05-08 12:49:06 ERROR][39m   => failed: activity took too long to complete
[32m[2019-05-08 12:49:06 INFO][39m Pausing after activity for 1s...
[32m[2019-05-08 12:49:07 INFO][39m Action: restart-master-db
[36m[2019-05-08 12:49:07 DEBUG][39m Running: /usr/local/bin/docker start $(cat pid.info)
[36m[2019-05-08 12:49:07 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-05-08 12:49:07 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '3100bb45f64d\n', 'stderr': ''}'
[32m[2019-05-08 12:49:07 INFO][39m Pausing after activity for 10s...
[32m[2019-05-08 12:49:17 INFO][39m Probe: read-health
[33m[2019-05-08 12:49:17 WARNING][39m This HTTP call returned a response with a HTTP status code above 400. This may indicate some error and not what you expected. Please have a look at the logs.
[36m[2019-05-08 12:49:17 DEBUG][39m   => succeeded with '{'status': 503, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Wed, 08 May 2019 11:49:17 GMT', 'Content-Type': 'text/html; charset=utf-8', 'Content-Length': '623', 'Connection': 'keep-alive', 'Retry-After': '30'}, 'body': '{"status": "failure", "hostname": "172.17.0.7", "results": [{"timestamp": 1557316157.9654584, "checker": "db_master_check", "passed": false, "output": "<class \'sqlalchemy.exc.OperationalError\'>", "expires": 1557316172.9654584}, {"timestamp": 1557316157.9713726, "checker": "db_slave_check", "passed": true, "output": "db slave ok", "expires": 1557316172.9713726}, {"timestamp": 1557316157.9728448, "checker": "redis_check", "passed": true, "output": "redis ok", "expires": 1557316172.9728448}, {"timestamp": 1557316157.9895022, "checker": "task_check", "passed": true, "output": "tasks ok", "expires": 1557316172.9895022}]}'}'
[32m[2019-05-08 12:49:17 INFO][39m Steady state hypothesis: Application responds
[32m[2019-05-08 12:49:17 INFO][39m Probe: we-can-request-health
[36m[2019-05-08 12:49:18 DEBUG][39m   => succeeded with '{'status': 200, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Wed, 08 May 2019 11:49:18 GMT', 'Content-Type': 'text/html; charset=utf-8', 'Content-Length': '589', 'Connection': 'keep-alive', 'Retry-After': '30'}, 'body': '{"status": "success", "hostname": "172.17.0.7", "results": [{"timestamp": 1557316148.5789278, "checker": "db_master_check", "passed": true, "output": "db master ok", "expires": 1557316163.5789278}, {"timestamp": 1557316148.621339, "checker": "db_slave_check", "passed": true, "output": "db slave ok", "expires": 1557316163.621339}, {"timestamp": 1557316148.659526, "checker": "redis_check", "passed": true, "output": "redis ok", "expires": 1557316163.659526}, {"timestamp": 1557316148.7231126, "checker": "task_check", "passed": true, "output": "tasks ok", "expires": 1557316163.7231126}]}'}'
[36m[2019-05-08 12:49:18 DEBUG][39m allowed tolerance is 200
[32m[2019-05-08 12:49:18 INFO][39m Steady state hypothesis is met!
[32m[2019-05-08 12:49:18 INFO][39m Let's rollback...
[32m[2019-05-08 12:49:18 INFO][39m Rollback: restart-master-db
[32m[2019-05-08 12:49:18 INFO][39m Action: restart-master-db
[36m[2019-05-08 12:49:18 DEBUG][39m Running: /usr/local/bin/docker start $(cat pid.info)
[36m[2019-05-08 12:49:18 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-05-08 12:49:18 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '3100bb45f64d\n', 'stderr': ''}'
[32m[2019-05-08 12:49:18 INFO][39m Experiment ended with status: completed
[36m[2019-05-08 12:49:18 DEBUG][39m Cleaning up controls
[36m[2019-05-08 12:49:18 DEBUG][39m Clearing activities cache
[36m[2019-05-08 12:49:40 DEBUG][39m ###############################################################################
[36m[2019-05-08 12:49:40 DEBUG][39m Running command 'run'
[36m[2019-05-08 12:49:40 DEBUG][39m Using settings file '/Users/adhorn/.chaostoolkit/settings.yaml'
[33m[2019-05-08 12:49:41 WARNING][39m 
    There is a new version (1.2.0) of the chaostoolkit available.
    You may upgrade by typing:
    
    $ pip install -U chaostoolkit
    
    Please review changes at https://github.com/chaostoolkit/chaostoolkit/blob/master/CHANGELOG.md
    
[36m[2019-05-08 12:49:41 DEBUG][39m The Chaos Toolkit settings file could not be found at '/Users/adhorn/.chaostoolkit/settings.yaml'.
[36m[2019-05-08 12:49:41 DEBUG][39m Building activity cache...
[36m[2019-05-08 12:49:41 DEBUG][39m Cached 5 activities
[32m[2019-05-08 12:49:41 INFO][39m Validating the experiment's syntax
[36m[2019-05-08 12:49:41 DEBUG][39m Loading configuration...
[36m[2019-05-08 12:49:41 DEBUG][39m Loading secrets...
[36m[2019-05-08 12:49:41 DEBUG][39m Secrets loaded
[32m[2019-05-08 12:49:41 INFO][39m Experiment looks valid
[36m[2019-05-08 12:49:41 DEBUG][39m Clearing activities cache
[36m[2019-05-08 12:49:41 DEBUG][39m Building activity cache...
[36m[2019-05-08 12:49:41 DEBUG][39m Cached 5 activities
[32m[2019-05-08 12:49:41 INFO][39m Running experiment: What is the impact of an terminating the database master
[36m[2019-05-08 12:49:41 DEBUG][39m Loading configuration...
[36m[2019-05-08 12:49:41 DEBUG][39m Loading secrets...
[36m[2019-05-08 12:49:41 DEBUG][39m Secrets loaded
[36m[2019-05-08 12:49:41 DEBUG][39m Initializing controls
[32m[2019-05-08 12:49:41 INFO][39m Steady state hypothesis: Application responds
[32m[2019-05-08 12:49:41 INFO][39m Probe: we-can-request-health
[36m[2019-05-08 12:49:41 DEBUG][39m   => succeeded with '{'status': 200, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Wed, 08 May 2019 11:49:41 GMT', 'Content-Type': 'text/html; charset=utf-8', 'Content-Length': '589', 'Connection': 'keep-alive', 'Retry-After': '30'}, 'body': '{"status": "success", "hostname": "172.17.0.7", "results": [{"timestamp": 1557316181.6825578, "checker": "db_master_check", "passed": true, "output": "db master ok", "expires": 1557316196.6825578}, {"timestamp": 1557316181.691858, "checker": "db_slave_check", "passed": true, "output": "db slave ok", "expires": 1557316196.691858}, {"timestamp": 1557316181.693941, "checker": "redis_check", "passed": true, "output": "redis ok", "expires": 1557316196.693941}, {"timestamp": 1557316181.7183905, "checker": "task_check", "passed": true, "output": "tasks ok", "expires": 1557316196.7183905}]}'}'
[36m[2019-05-08 12:49:41 DEBUG][39m allowed tolerance is 200
[32m[2019-05-08 12:49:41 INFO][39m Steady state hypothesis is met!
[32m[2019-05-08 12:49:41 INFO][39m Action: stop-master-db
[36m[2019-05-08 12:49:41 DEBUG][39m Running: /usr/local/bin/docker ps -qf 'name=master' > pid.info
[36m[2019-05-08 12:49:41 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '', 'stderr': ''}'
[32m[2019-05-08 12:49:41 INFO][39m Pausing after activity for 1s...
[32m[2019-05-08 12:49:42 INFO][39m Action: stop-master-db
[36m[2019-05-08 12:49:42 DEBUG][39m Running: /usr/local/bin/docker stop $(cat pid.info)
[36m[2019-05-08 12:49:46 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-05-08 12:49:46 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '3100bb45f64d\n', 'stderr': ''}'
[32m[2019-05-08 12:49:46 INFO][39m Pausing after activity for 10s...
[32m[2019-05-08 12:49:56 INFO][39m Probe: read-echo
[36m[2019-05-08 12:49:56 DEBUG][39m   => succeeded with '{'status': 200, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Wed, 08 May 2019 11:49:57 GMT', 'Content-Type': 'application/json', 'Content-Length': '31', 'Connection': 'keep-alive'}, 'body': {'Status': 'Up and running...'}}'
[32m[2019-05-08 12:49:56 INFO][39m Pausing after activity for 1s...
[32m[2019-05-08 12:49:57 INFO][39m Probe: read-health
[33m[2019-05-08 12:49:58 WARNING][39m This HTTP call returned a response with a HTTP status code above 400. This may indicate some error and not what you expected. Please have a look at the logs.
[36m[2019-05-08 12:49:58 DEBUG][39m   => succeeded with '{'status': 503, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Wed, 08 May 2019 11:49:58 GMT', 'Content-Type': 'text/html; charset=utf-8', 'Content-Length': '617', 'Connection': 'keep-alive', 'Retry-After': '30'}, 'body': '{"status": "failure", "hostname": "172.17.0.7", "results": [{"timestamp": 1557316185.67723, "checker": "db_master_check", "passed": false, "output": "<class \'sqlalchemy.exc.OperationalError\'>", "expires": 1557316200.67723}, {"timestamp": 1557316185.6819987, "checker": "db_slave_check", "passed": true, "output": "db slave ok", "expires": 1557316200.6819987}, {"timestamp": 1557316185.683717, "checker": "redis_check", "passed": true, "output": "redis ok", "expires": 1557316200.683717}, {"timestamp": 1557316185.6971762, "checker": "task_check", "passed": true, "output": "tasks ok", "expires": 1557316200.6971762}]}'}'
[32m[2019-05-08 12:49:58 INFO][39m Pausing after activity for 1s...
[32m[2019-05-08 12:49:59 INFO][39m Action: restart-master-db
[36m[2019-05-08 12:49:59 DEBUG][39m Running: /usr/local/bin/docker start $(cat pid.info)
[36m[2019-05-08 12:49:59 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-05-08 12:49:59 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '3100bb45f64d\n', 'stderr': ''}'
[32m[2019-05-08 12:49:59 INFO][39m Pausing after activity for 10s...
[32m[2019-05-08 12:50:09 INFO][39m Probe: read-health
[36m[2019-05-08 12:50:09 DEBUG][39m   => succeeded with '{'status': 200, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Wed, 08 May 2019 11:50:09 GMT', 'Content-Type': 'text/html; charset=utf-8', 'Content-Length': '591', 'Connection': 'keep-alive', 'Retry-After': '30'}, 'body': '{"status": "success", "hostname": "172.17.0.7", "results": [{"timestamp": 1557316209.7027164, "checker": "db_master_check", "passed": true, "output": "db master ok", "expires": 1557316224.7027164}, {"timestamp": 1557316209.712309, "checker": "db_slave_check", "passed": true, "output": "db slave ok", "expires": 1557316224.712309}, {"timestamp": 1557316209.7165077, "checker": "redis_check", "passed": true, "output": "redis ok", "expires": 1557316224.7165077}, {"timestamp": 1557316209.7291994, "checker": "task_check", "passed": true, "output": "tasks ok", "expires": 1557316224.7291994}]}'}'
[32m[2019-05-08 12:50:09 INFO][39m Steady state hypothesis: Application responds
[32m[2019-05-08 12:50:09 INFO][39m Probe: we-can-request-health
[36m[2019-05-08 12:50:09 DEBUG][39m   => succeeded with '{'status': 200, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Wed, 08 May 2019 11:50:09 GMT', 'Content-Type': 'text/html; charset=utf-8', 'Content-Length': '591', 'Connection': 'keep-alive', 'Retry-After': '30'}, 'body': '{"status": "success", "hostname": "172.17.0.7", "results": [{"timestamp": 1557316209.7027164, "checker": "db_master_check", "passed": true, "output": "db master ok", "expires": 1557316224.7027164}, {"timestamp": 1557316209.712309, "checker": "db_slave_check", "passed": true, "output": "db slave ok", "expires": 1557316224.712309}, {"timestamp": 1557316209.7165077, "checker": "redis_check", "passed": true, "output": "redis ok", "expires": 1557316224.7165077}, {"timestamp": 1557316209.7291994, "checker": "task_check", "passed": true, "output": "tasks ok", "expires": 1557316224.7291994}]}'}'
[36m[2019-05-08 12:50:09 DEBUG][39m allowed tolerance is 200
[32m[2019-05-08 12:50:09 INFO][39m Steady state hypothesis is met!
[32m[2019-05-08 12:50:09 INFO][39m Let's rollback...
[32m[2019-05-08 12:50:09 INFO][39m Rollback: restart-master-db
[32m[2019-05-08 12:50:09 INFO][39m Action: restart-master-db
[36m[2019-05-08 12:50:09 DEBUG][39m Running: /usr/local/bin/docker start $(cat pid.info)
[36m[2019-05-08 12:50:09 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-05-08 12:50:09 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '3100bb45f64d\n', 'stderr': ''}'
[32m[2019-05-08 12:50:09 INFO][39m Experiment ended with status: completed
[36m[2019-05-08 12:50:09 DEBUG][39m Cleaning up controls
[36m[2019-05-08 12:50:09 DEBUG][39m Clearing activities cache
[36m[2019-05-08 12:50:18 DEBUG][39m ###############################################################################
[36m[2019-05-08 12:50:18 DEBUG][39m Running command 'run'
[36m[2019-05-08 12:50:18 DEBUG][39m Using settings file '/Users/adhorn/.chaostoolkit/settings.yaml'
[36m[2019-05-08 12:50:19 DEBUG][39m The Chaos Toolkit settings file could not be found at '/Users/adhorn/.chaostoolkit/settings.yaml'.
[36m[2019-05-08 12:50:19 DEBUG][39m Building activity cache...
[36m[2019-05-08 12:50:19 DEBUG][39m Cached 5 activities
[32m[2019-05-08 12:50:19 INFO][39m Validating the experiment's syntax
[36m[2019-05-08 12:50:19 DEBUG][39m Loading configuration...
[36m[2019-05-08 12:50:19 DEBUG][39m Loading secrets...
[36m[2019-05-08 12:50:19 DEBUG][39m Secrets loaded
[32m[2019-05-08 12:50:19 INFO][39m Experiment looks valid
[36m[2019-05-08 12:50:19 DEBUG][39m Clearing activities cache
[36m[2019-05-08 12:50:19 DEBUG][39m Building activity cache...
[36m[2019-05-08 12:50:19 DEBUG][39m Cached 5 activities
[32m[2019-05-08 12:50:19 INFO][39m Running experiment: What is the impact of an terminating the database master
[36m[2019-05-08 12:50:19 DEBUG][39m Loading configuration...
[36m[2019-05-08 12:50:19 DEBUG][39m Loading secrets...
[36m[2019-05-08 12:50:19 DEBUG][39m Secrets loaded
[36m[2019-05-08 12:50:19 DEBUG][39m Initializing controls
[36m[2019-05-08 12:50:19 DEBUG][39m No controls to apply on 'experiment'
[32m[2019-05-08 12:50:19 INFO][39m Steady state hypothesis: Application responds
[36m[2019-05-08 12:50:19 DEBUG][39m No controls to apply on 'hypothesis'
[36m[2019-05-08 12:50:19 DEBUG][39m No controls to apply on 'activity'
[32m[2019-05-08 12:50:19 INFO][39m Probe: we-can-request-health
[36m[2019-05-08 12:50:19 DEBUG][39m   => succeeded with '{'status': 200, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Wed, 08 May 2019 11:50:19 GMT', 'Content-Type': 'text/html; charset=utf-8', 'Content-Length': '591', 'Connection': 'keep-alive', 'Retry-After': '30'}, 'body': '{"status": "success", "hostname": "172.17.0.7", "results": [{"timestamp": 1557316209.7027164, "checker": "db_master_check", "passed": true, "output": "db master ok", "expires": 1557316224.7027164}, {"timestamp": 1557316209.712309, "checker": "db_slave_check", "passed": true, "output": "db slave ok", "expires": 1557316224.712309}, {"timestamp": 1557316209.7165077, "checker": "redis_check", "passed": true, "output": "redis ok", "expires": 1557316224.7165077}, {"timestamp": 1557316209.7291994, "checker": "task_check", "passed": true, "output": "tasks ok", "expires": 1557316224.7291994}]}'}'
[36m[2019-05-08 12:50:19 DEBUG][39m No controls to apply on 'activity'
[36m[2019-05-08 12:50:19 DEBUG][39m allowed tolerance is 200
[32m[2019-05-08 12:50:19 INFO][39m Steady state hypothesis is met!
[36m[2019-05-08 12:50:19 DEBUG][39m No controls to apply on 'hypothesis'
[36m[2019-05-08 12:50:19 DEBUG][39m No controls to apply on 'method'
[36m[2019-05-08 12:50:19 DEBUG][39m No controls to apply on 'activity'
[32m[2019-05-08 12:50:19 INFO][39m Action: stop-master-db
[36m[2019-05-08 12:50:19 DEBUG][39m Running: /usr/local/bin/docker ps -qf 'name=master' > pid.info
[36m[2019-05-08 12:50:19 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '', 'stderr': ''}'
[32m[2019-05-08 12:50:19 INFO][39m Pausing after activity for 1s...
[36m[2019-05-08 12:50:20 DEBUG][39m No controls to apply on 'activity'
[36m[2019-05-08 12:50:20 DEBUG][39m No controls to apply on 'activity'
[32m[2019-05-08 12:50:20 INFO][39m Action: stop-master-db
[36m[2019-05-08 12:50:20 DEBUG][39m Running: /usr/local/bin/docker stop $(cat pid.info)
[36m[2019-05-08 12:50:24 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-05-08 12:50:24 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '3100bb45f64d\n', 'stderr': ''}'
[32m[2019-05-08 12:50:24 INFO][39m Pausing after activity for 10s...
[36m[2019-05-08 12:50:34 DEBUG][39m No controls to apply on 'activity'
[36m[2019-05-08 12:50:34 DEBUG][39m No controls to apply on 'activity'
[32m[2019-05-08 12:50:34 INFO][39m Probe: read-echo
[36m[2019-05-08 12:50:34 DEBUG][39m   => succeeded with '{'status': 200, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Wed, 08 May 2019 11:50:34 GMT', 'Content-Type': 'application/json', 'Content-Length': '31', 'Connection': 'keep-alive'}, 'body': {'Status': 'Up and running...'}}'
[32m[2019-05-08 12:50:34 INFO][39m Pausing after activity for 1s...
[36m[2019-05-08 12:50:35 DEBUG][39m No controls to apply on 'activity'
[36m[2019-05-08 12:50:35 DEBUG][39m No controls to apply on 'activity'
[32m[2019-05-08 12:50:35 INFO][39m Probe: read-health
[36m[2019-05-08 12:50:40 DEBUG][39m Activity failed
    Traceback (most recent call last):
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/urllib3/connectionpool.py", line 384, in _make_request
        six.raise_from(e, None)
      File "<string>", line 2, in raise_from
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/urllib3/connectionpool.py", line 380, in _make_request
        httplib_response = conn.getresponse()
      File "/Users/adhorn/.pyenv/versions/3.7.1/lib/python3.7/http/client.py", line 1321, in getresponse
        response.begin()
      File "/Users/adhorn/.pyenv/versions/3.7.1/lib/python3.7/http/client.py", line 296, in begin
        version, status, reason = self._read_status()
      File "/Users/adhorn/.pyenv/versions/3.7.1/lib/python3.7/http/client.py", line 257, in _read_status
        line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
      File "/Users/adhorn/.pyenv/versions/3.7.1/lib/python3.7/socket.py", line 589, in readinto
        return self._sock.recv_into(b)
    socket.timeout: timed out
    
    During handling of the above exception, another exception occurred:
    
    Traceback (most recent call last):
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/requests/adapters.py", line 449, in send
        timeout=timeout
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/urllib3/connectionpool.py", line 638, in urlopen
        _stacktrace=sys.exc_info()[2])
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/urllib3/util/retry.py", line 367, in increment
        raise six.reraise(type(error), error, _stacktrace)
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/urllib3/packages/six.py", line 686, in reraise
        raise value
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/urllib3/connectionpool.py", line 600, in urlopen
        chunked=chunked)
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/urllib3/connectionpool.py", line 386, in _make_request
        self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/urllib3/connectionpool.py", line 306, in _raise_timeout
        raise ReadTimeoutError(self, url, "Read timed out. (read timeout=%s)" % timeout_value)
    urllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='127.0.0.1', port=80): Read timed out. (read timeout=5)
    
    During handling of the above exception, another exception occurred:
    
    Traceback (most recent call last):
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/chaoslib/provider/http.py", line 48, in run_http_activity
        verify=verify_tls)
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/requests/api.py", line 75, in get
        return request('get', url, params=params, **kwargs)
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/requests/api.py", line 60, in request
        return session.request(method=method, url=url, **kwargs)
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/requests/sessions.py", line 533, in request
        resp = self.send(prep, **send_kwargs)
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/requests/sessions.py", line 646, in send
        r = adapter.send(request, **kwargs)
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/requests/adapters.py", line 529, in send
        raise ReadTimeout(e, request=request)
    requests.exceptions.ReadTimeout: HTTPConnectionPool(host='127.0.0.1', port=80): Read timed out. (read timeout=5)
    
    During handling of the above exception, another exception occurred:
    
    Traceback (most recent call last):
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/chaoslib/activity.py", line 223, in run_activity
        result = run_http_activity(activity, configuration, secrets)
      File "/Users/adhorn/Virtualenvs/foobar/lib/python3.7/site-packages/chaoslib/provider/http.py", line 84, in run_http_activity
        raise ActivityFailed("activity took too long to complete")
    chaoslib.exceptions.ActivityFailed: activity took too long to complete
[31m[2019-05-08 12:50:40 ERROR][39m   => failed: activity took too long to complete
[32m[2019-05-08 12:50:40 INFO][39m Pausing after activity for 1s...
[36m[2019-05-08 12:50:41 DEBUG][39m No controls to apply on 'activity'
[36m[2019-05-08 12:50:41 DEBUG][39m No controls to apply on 'activity'
[32m[2019-05-08 12:50:41 INFO][39m Action: restart-master-db
[36m[2019-05-08 12:50:41 DEBUG][39m Running: /usr/local/bin/docker start $(cat pid.info)
[36m[2019-05-08 12:50:42 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-05-08 12:50:42 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '3100bb45f64d\n', 'stderr': ''}'
[32m[2019-05-08 12:50:42 INFO][39m Pausing after activity for 10s...
[36m[2019-05-08 12:50:52 DEBUG][39m No controls to apply on 'activity'
[36m[2019-05-08 12:50:52 DEBUG][39m No controls to apply on 'activity'
[32m[2019-05-08 12:50:52 INFO][39m Probe: read-health
[33m[2019-05-08 12:50:52 WARNING][39m This HTTP call returned a response with a HTTP status code above 400. This may indicate some error and not what you expected. Please have a look at the logs.
[36m[2019-05-08 12:50:52 DEBUG][39m   => succeeded with '{'status': 503, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Wed, 08 May 2019 11:50:52 GMT', 'Content-Type': 'text/html; charset=utf-8', 'Content-Length': '621', 'Connection': 'keep-alive', 'Retry-After': '30'}, 'body': '{"status": "failure", "hostname": "172.17.0.7", "results": [{"timestamp": 1557316252.4264061, "checker": "db_master_check", "passed": false, "output": "<class \'sqlalchemy.exc.OperationalError\'>", "expires": 1557316267.4264061}, {"timestamp": 1557316252.4347668, "checker": "db_slave_check", "passed": true, "output": "db slave ok", "expires": 1557316267.4347668}, {"timestamp": 1557316252.4405081, "checker": "redis_check", "passed": true, "output": "redis ok", "expires": 1557316267.4405081}, {"timestamp": 1557316252.500764, "checker": "task_check", "passed": true, "output": "tasks ok", "expires": 1557316267.500764}]}'}'
[36m[2019-05-08 12:50:52 DEBUG][39m No controls to apply on 'activity'
[36m[2019-05-08 12:50:52 DEBUG][39m No controls to apply on 'method'
[32m[2019-05-08 12:50:52 INFO][39m Steady state hypothesis: Application responds
[36m[2019-05-08 12:50:52 DEBUG][39m No controls to apply on 'hypothesis'
[36m[2019-05-08 12:50:52 DEBUG][39m No controls to apply on 'activity'
[32m[2019-05-08 12:50:52 INFO][39m Probe: we-can-request-health
[36m[2019-05-08 12:50:52 DEBUG][39m   => succeeded with '{'status': 503, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Wed, 08 May 2019 11:50:52 GMT', 'Content-Type': 'text/html; charset=utf-8', 'Content-Length': '623', 'Connection': 'keep-alive', 'Retry-After': '30'}, 'body': '{"status": "failure", "hostname": "172.17.0.7", "results": [{"timestamp": 1557316252.5352027, "checker": "db_master_check", "passed": false, "output": "<class \'sqlalchemy.exc.OperationalError\'>", "expires": 1557316267.5352027}, {"timestamp": 1557316252.5470371, "checker": "db_slave_check", "passed": true, "output": "db slave ok", "expires": 1557316267.5470371}, {"timestamp": 1557316252.5489612, "checker": "redis_check", "passed": true, "output": "redis ok", "expires": 1557316267.5489612}, {"timestamp": 1557316252.5588584, "checker": "task_check", "passed": true, "output": "tasks ok", "expires": 1557316267.5588584}]}'}'
[36m[2019-05-08 12:50:52 DEBUG][39m No controls to apply on 'activity'
[36m[2019-05-08 12:50:52 DEBUG][39m allowed tolerance is 200
[36m[2019-05-08 12:50:52 DEBUG][39m No controls to apply on 'hypothesis'
[31m[2019-05-08 12:50:52 CRITICAL][39m Steady state probe 'we-can-request-health' is not in the given tolerance so failing this experiment
[32m[2019-05-08 12:50:52 INFO][39m Let's rollback...
[36m[2019-05-08 12:50:52 DEBUG][39m No controls to apply on 'rollback'
[32m[2019-05-08 12:50:52 INFO][39m Rollback: restart-master-db
[36m[2019-05-08 12:50:52 DEBUG][39m No controls to apply on 'activity'
[32m[2019-05-08 12:50:52 INFO][39m Action: restart-master-db
[36m[2019-05-08 12:50:52 DEBUG][39m Running: /usr/local/bin/docker start $(cat pid.info)
[36m[2019-05-08 12:50:52 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-05-08 12:50:52 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '3100bb45f64d\n', 'stderr': ''}'
[36m[2019-05-08 12:50:52 DEBUG][39m No controls to apply on 'activity'
[36m[2019-05-08 12:50:52 DEBUG][39m No controls to apply on 'rollback'
[32m[2019-05-08 12:50:52 INFO][39m Experiment ended with status: deviated
[32m[2019-05-08 12:50:52 INFO][39m The steady-state has deviated, a weakness may have been discovered
[36m[2019-05-08 12:50:52 DEBUG][39m No controls to apply on 'experiment'
[36m[2019-05-08 12:50:52 DEBUG][39m Cleaning up controls
[36m[2019-05-08 12:50:52 DEBUG][39m Clearing activities cache
[36m[2019-05-08 15:48:10 DEBUG][39m ###############################################################################
[36m[2019-05-08 15:48:10 DEBUG][39m Running command 'run'
[36m[2019-05-08 15:48:10 DEBUG][39m Using settings file '/Users/adhorn/.chaostoolkit/settings.yaml'
[36m[2019-05-08 15:48:11 DEBUG][39m The Chaos Toolkit settings file could not be found at '/Users/adhorn/.chaostoolkit/settings.yaml'.
[36m[2019-05-08 15:48:11 DEBUG][39m Building activity cache...
[36m[2019-05-08 15:48:11 DEBUG][39m Cached 5 activities
[32m[2019-05-08 15:48:11 INFO][39m Validating the experiment's syntax
[36m[2019-05-08 15:48:11 DEBUG][39m Loading configuration...
[36m[2019-05-08 15:48:11 DEBUG][39m Loading secrets...
[36m[2019-05-08 15:48:11 DEBUG][39m Secrets loaded
[32m[2019-05-08 15:48:11 INFO][39m Experiment looks valid
[36m[2019-05-08 15:48:11 DEBUG][39m Clearing activities cache
[36m[2019-05-08 15:48:11 DEBUG][39m Building activity cache...
[36m[2019-05-08 15:48:11 DEBUG][39m Cached 5 activities
[32m[2019-05-08 15:48:11 INFO][39m Running experiment: What is the impact of an terminating the database master
[36m[2019-05-08 15:48:11 DEBUG][39m Loading configuration...
[36m[2019-05-08 15:48:11 DEBUG][39m Loading secrets...
[36m[2019-05-08 15:48:11 DEBUG][39m Secrets loaded
[36m[2019-05-08 15:48:11 DEBUG][39m Initializing controls
[36m[2019-05-08 15:48:11 DEBUG][39m No controls to apply on 'experiment'
[32m[2019-05-08 15:48:11 INFO][39m Steady state hypothesis: Application responds
[36m[2019-05-08 15:48:11 DEBUG][39m No controls to apply on 'hypothesis'
[36m[2019-05-08 15:48:11 DEBUG][39m No controls to apply on 'activity'
[32m[2019-05-08 15:48:11 INFO][39m Probe: we-can-request-health
[36m[2019-05-08 15:48:11 DEBUG][39m   => succeeded with '{'status': 200, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Wed, 08 May 2019 14:48:11 GMT', 'Content-Type': 'text/html; charset=utf-8', 'Content-Length': '591', 'Connection': 'keep-alive', 'Retry-After': '30'}, 'body': '{"status": "success", "hostname": "172.17.0.7", "results": [{"timestamp": 1557326891.6643946, "checker": "db_master_check", "passed": true, "output": "db master ok", "expires": 1557326906.6643946}, {"timestamp": 1557326891.7022307, "checker": "db_slave_check", "passed": true, "output": "db slave ok", "expires": 1557326906.7022307}, {"timestamp": 1557326891.7039986, "checker": "redis_check", "passed": true, "output": "redis ok", "expires": 1557326906.7039986}, {"timestamp": 1557326891.716375, "checker": "task_check", "passed": true, "output": "tasks ok", "expires": 1557326906.716375}]}'}'
[36m[2019-05-08 15:48:11 DEBUG][39m No controls to apply on 'activity'
[36m[2019-05-08 15:48:11 DEBUG][39m allowed tolerance is 200
[32m[2019-05-08 15:48:11 INFO][39m Steady state hypothesis is met!
[36m[2019-05-08 15:48:11 DEBUG][39m No controls to apply on 'hypothesis'
[36m[2019-05-08 15:48:11 DEBUG][39m No controls to apply on 'method'
[36m[2019-05-08 15:48:11 DEBUG][39m No controls to apply on 'activity'
[32m[2019-05-08 15:48:11 INFO][39m Action: stop-master-db
[36m[2019-05-08 15:48:11 DEBUG][39m Running: /usr/local/bin/docker ps -qf 'name=master' > pid.info
[36m[2019-05-08 15:48:11 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '', 'stderr': ''}'
[32m[2019-05-08 15:48:11 INFO][39m Pausing after activity for 1s...
[36m[2019-05-08 15:48:12 DEBUG][39m No controls to apply on 'activity'
[36m[2019-05-08 15:48:12 DEBUG][39m No controls to apply on 'activity'
[32m[2019-05-08 15:48:12 INFO][39m Action: stop-master-db
[36m[2019-05-08 15:48:12 DEBUG][39m Running: /usr/local/bin/docker stop $(cat pid.info)
[36m[2019-05-08 15:48:16 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-05-08 15:48:16 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '3100bb45f64d\n', 'stderr': ''}'
[32m[2019-05-08 15:48:16 INFO][39m Pausing after activity for 10s...
[36m[2019-05-08 15:48:26 DEBUG][39m No controls to apply on 'activity'
[36m[2019-05-08 15:48:26 DEBUG][39m No controls to apply on 'activity'
[32m[2019-05-08 15:48:26 INFO][39m Probe: read-echo
[36m[2019-05-08 15:48:26 DEBUG][39m   => succeeded with '{'status': 200, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Wed, 08 May 2019 14:48:26 GMT', 'Content-Type': 'application/json', 'Content-Length': '31', 'Connection': 'keep-alive'}, 'body': {'Status': 'Up and running...'}}'
[32m[2019-05-08 15:48:26 INFO][39m Pausing after activity for 1s...
[36m[2019-05-08 15:48:27 DEBUG][39m No controls to apply on 'activity'
[36m[2019-05-08 15:48:27 DEBUG][39m No controls to apply on 'activity'
[32m[2019-05-08 15:48:27 INFO][39m Probe: read-health
[33m[2019-05-08 15:48:27 WARNING][39m This HTTP call returned a response with a HTTP status code above 400. This may indicate some error and not what you expected. Please have a look at the logs.
[36m[2019-05-08 15:48:27 DEBUG][39m   => succeeded with '{'status': 503, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Wed, 08 May 2019 14:48:27 GMT', 'Content-Type': 'text/html; charset=utf-8', 'Content-Length': '621', 'Connection': 'keep-alive', 'Retry-After': '30'}, 'body': '{"status": "failure", "hostname": "172.17.0.7", "results": [{"timestamp": 1557326907.9196699, "checker": "db_master_check", "passed": false, "output": "<class \'sqlalchemy.exc.OperationalError\'>", "expires": 1557326922.9196699}, {"timestamp": 1557326907.9485126, "checker": "db_slave_check", "passed": true, "output": "db slave ok", "expires": 1557326922.9485126}, {"timestamp": 1557326907.950509, "checker": "redis_check", "passed": true, "output": "redis ok", "expires": 1557326922.950509}, {"timestamp": 1557326907.9628332, "checker": "task_check", "passed": true, "output": "tasks ok", "expires": 1557326922.9628332}]}'}'
[32m[2019-05-08 15:48:27 INFO][39m Pausing after activity for 1s...
[36m[2019-05-08 15:48:28 DEBUG][39m No controls to apply on 'activity'
[36m[2019-05-08 15:48:28 DEBUG][39m No controls to apply on 'activity'
[32m[2019-05-08 15:48:28 INFO][39m Action: restart-master-db
[36m[2019-05-08 15:48:28 DEBUG][39m Running: /usr/local/bin/docker start $(cat pid.info)
[36m[2019-05-08 15:48:29 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-05-08 15:48:29 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '3100bb45f64d\n', 'stderr': ''}'
[32m[2019-05-08 15:48:29 INFO][39m Pausing after activity for 10s...
[36m[2019-05-08 15:48:39 DEBUG][39m No controls to apply on 'activity'
[36m[2019-05-08 15:48:39 DEBUG][39m No controls to apply on 'activity'
[32m[2019-05-08 15:48:39 INFO][39m Probe: read-health
[33m[2019-05-08 15:48:39 WARNING][39m This HTTP call returned a response with a HTTP status code above 400. This may indicate some error and not what you expected. Please have a look at the logs.
[36m[2019-05-08 15:48:39 DEBUG][39m   => succeeded with '{'status': 503, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Wed, 08 May 2019 14:48:39 GMT', 'Content-Type': 'text/html; charset=utf-8', 'Content-Length': '652', 'Connection': 'keep-alive', 'Retry-After': '30'}, 'body': '{"status": "failure", "hostname": "172.17.0.7", "results": [{"timestamp": 1557326919.6720226, "checker": "db_master_check", "passed": false, "output": "<class \'sqlalchemy.exc.OperationalError\'>", "expires": 1557326934.6720226}, {"timestamp": 1557326919.7081375, "checker": "db_slave_check", "passed": false, "output": "<class \'sqlalchemy.exc.OperationalError\'>", "expires": 1557326934.7081375}, {"timestamp": 1557326919.7102852, "checker": "redis_check", "passed": true, "output": "redis ok", "expires": 1557326934.7102852}, {"timestamp": 1557326919.727129, "checker": "task_check", "passed": true, "output": "tasks ok", "expires": 1557326934.727129}]}'}'
[36m[2019-05-08 15:48:39 DEBUG][39m No controls to apply on 'activity'
[36m[2019-05-08 15:48:39 DEBUG][39m No controls to apply on 'method'
[32m[2019-05-08 15:48:39 INFO][39m Steady state hypothesis: Application responds
[36m[2019-05-08 15:48:39 DEBUG][39m No controls to apply on 'hypothesis'
[36m[2019-05-08 15:48:39 DEBUG][39m No controls to apply on 'activity'
[32m[2019-05-08 15:48:39 INFO][39m Probe: we-can-request-health
[36m[2019-05-08 15:48:39 DEBUG][39m   => succeeded with '{'status': 503, 'headers': {'Server': 'nginx/1.15.9', 'Date': 'Wed, 08 May 2019 14:48:39 GMT', 'Content-Type': 'text/html; charset=utf-8', 'Content-Length': '621', 'Connection': 'keep-alive', 'Retry-After': '30'}, 'body': '{"status": "failure", "hostname": "172.17.0.7", "results": [{"timestamp": 1557326907.9196699, "checker": "db_master_check", "passed": false, "output": "<class \'sqlalchemy.exc.OperationalError\'>", "expires": 1557326922.9196699}, {"timestamp": 1557326907.9485126, "checker": "db_slave_check", "passed": true, "output": "db slave ok", "expires": 1557326922.9485126}, {"timestamp": 1557326907.950509, "checker": "redis_check", "passed": true, "output": "redis ok", "expires": 1557326922.950509}, {"timestamp": 1557326907.9628332, "checker": "task_check", "passed": true, "output": "tasks ok", "expires": 1557326922.9628332}]}'}'
[36m[2019-05-08 15:48:39 DEBUG][39m No controls to apply on 'activity'
[36m[2019-05-08 15:48:39 DEBUG][39m allowed tolerance is 200
[36m[2019-05-08 15:48:39 DEBUG][39m No controls to apply on 'hypothesis'
[31m[2019-05-08 15:48:39 CRITICAL][39m Steady state probe 'we-can-request-health' is not in the given tolerance so failing this experiment
[32m[2019-05-08 15:48:39 INFO][39m Let's rollback...
[36m[2019-05-08 15:48:39 DEBUG][39m No controls to apply on 'rollback'
[32m[2019-05-08 15:48:39 INFO][39m Rollback: restart-master-db
[36m[2019-05-08 15:48:39 DEBUG][39m No controls to apply on 'activity'
[32m[2019-05-08 15:48:39 INFO][39m Action: restart-master-db
[36m[2019-05-08 15:48:39 DEBUG][39m Running: /usr/local/bin/docker start $(cat pid.info)
[36m[2019-05-08 15:48:39 DEBUG][39m Data encoding detected as 'ascii' with a confidence of 1.0
[36m[2019-05-08 15:48:39 DEBUG][39m   => succeeded with '{'status': 0, 'stdout': '3100bb45f64d\n', 'stderr': ''}'
[36m[2019-05-08 15:48:39 DEBUG][39m No controls to apply on 'activity'
[36m[2019-05-08 15:48:39 DEBUG][39m No controls to apply on 'rollback'
[32m[2019-05-08 15:48:39 INFO][39m Experiment ended with status: deviated
[32m[2019-05-08 15:48:39 INFO][39m The steady-state has deviated, a weakness may have been discovered
[36m[2019-05-08 15:48:39 DEBUG][39m No controls to apply on 'experiment'
[36m[2019-05-08 15:48:39 DEBUG][39m Cleaning up controls
[36m[2019-05-08 15:48:39 DEBUG][39m Clearing activities cache
